{
    "$id": "user/subscribe/response",
    "scopes": [
        "tachyon.lobby"
    ],
    "anyOf": [
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "user/subscribe",
                    "type": "string"
                },
                "status": {
                    "const": "success",
                    "type": "string"
                },
                "data": {
                    "type": "object",
                    "properties": {
                        "users": {
                            "type": "array",
                            "items": {
                                "type": "object",
                                "properties": {
                                    "userId": {
                                        "type": "string"
                                    },
                                    "username": {
                                        "type": "string"
                                    },
                                    "displayName": {
                                        "type": "string"
                                    },
                                    "clanId": {
                                        "anyOf": [
                                            {
                                                "type": "string"
                                            },
                                            {
                                                "type": "null"
                                            }
                                        ]
                                    },
                                    "partyId": {
                                        "anyOf": [
                                            {
                                                "type": "string"
                                            },
                                            {
                                                "type": "null"
                                            }
                                        ]
                                    },
                                    "scopes": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    },
                                    "countryCode": {
                                        "type": "string"
                                    },
                                    "status": {
                                        "anyOf": [
                                            {
                                                "const": "offline",
                                                "type": "string"
                                            },
                                            {
                                                "const": "menu",
                                                "type": "string"
                                            },
                                            {
                                                "const": "playing",
                                                "type": "string"
                                            },
                                            {
                                                "const": "lobby",
                                                "type": "string"
                                            }
                                        ]
                                    },
                                    "battleStatus": {
                                        "anyOf": [
                                            {
                                                "allOf": [
                                                    {
                                                        "type": "object",
                                                        "properties": {
                                                            "battleId": {
                                                                "type": "string"
                                                            }
                                                        },
                                                        "required": [
                                                            "battleId"
                                                        ]
                                                    },
                                                    {
                                                        "anyOf": [
                                                            {
                                                                "type": "object",
                                                                "allOf": [
                                                                    {
                                                                        "type": "object",
                                                                        "properties": {
                                                                            "playerId": {
                                                                                "type": "integer"
                                                                            },
                                                                            "teamId": {
                                                                                "type": "integer"
                                                                            },
                                                                            "color": {
                                                                                "type": "string"
                                                                            },
                                                                            "bonus": {
                                                                                "type": "number"
                                                                            },
                                                                            "inGame": {
                                                                                "type": "boolean"
                                                                            }
                                                                        },
                                                                        "required": [
                                                                            "playerId",
                                                                            "teamId",
                                                                            "color",
                                                                            "bonus",
                                                                            "inGame"
                                                                        ]
                                                                    },
                                                                    {
                                                                        "type": "object",
                                                                        "properties": {
                                                                            "isSpectator": {
                                                                                "const": false,
                                                                                "type": "boolean"
                                                                            },
                                                                            "isBot": {
                                                                                "const": false,
                                                                                "type": "boolean"
                                                                            },
                                                                            "ready": {
                                                                                "type": "boolean"
                                                                            },
                                                                            "sync": {
                                                                                "type": "object",
                                                                                "properties": {
                                                                                    "engine": {
                                                                                        "type": "number"
                                                                                    },
                                                                                    "game": {
                                                                                        "type": "number"
                                                                                    },
                                                                                    "map": {
                                                                                        "type": "number"
                                                                                    }
                                                                                },
                                                                                "required": [
                                                                                    "engine",
                                                                                    "game",
                                                                                    "map"
                                                                                ]
                                                                            }
                                                                        },
                                                                        "required": [
                                                                            "isSpectator",
                                                                            "isBot",
                                                                            "ready",
                                                                            "sync"
                                                                        ]
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "type": "object",
                                                                "properties": {
                                                                    "isSpectator": {
                                                                        "const": true,
                                                                        "type": "boolean"
                                                                    },
                                                                    "isBot": {
                                                                        "const": false,
                                                                        "type": "boolean"
                                                                    }
                                                                },
                                                                "required": [
                                                                    "isSpectator",
                                                                    "isBot"
                                                                ]
                                                            }
                                                        ]
                                                    }
                                                ]
                                            },
                                            {
                                                "type": "null"
                                            }
                                        ]
                                    }
                                },
                                "required": [
                                    "userId",
                                    "username",
                                    "displayName",
                                    "clanId",
                                    "partyId",
                                    "scopes",
                                    "status",
                                    "battleStatus"
                                ]
                            }
                        }
                    },
                    "required": [
                        "users"
                    ]
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "data"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "user/subscribe",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "internal_error",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "user/subscribe",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "unauthorized",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "user/subscribe",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "invalid_request",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "user/subscribe",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "command_unimplemented",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        }
    ]
}