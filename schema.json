[
    {
        "$id": "userIds",
        "type": "array",
        "items": {
            "minimum": 0,
            "type": "integer"
        }
    },
    {
        "$id": "user",
        "type": "object",
        "properties": {
            "id": {
                "minimum": 0,
                "description": "Unique Identifier for this user",
                "examples": [
                    1234
                ],
                "type": "integer"
            },
            "name": {
                "minLength": 2,
                "maxLength": 20,
                "pattern": "^[A-Za-z0-9_]+$",
                "type": "string"
            },
            "is_bot": {
                "default": false,
                "type": "boolean"
            },
            "clan_id": {
                "minimum": 0,
                "type": "integer"
            },
            "icons": {
                "type": "object",
                "patternProperties": {
                    "^.*$": {
                        "type": "string"
                    }
                },
                "additionalProperties": false
            },
            "roles": {
                "type": "array",
                "items": {
                    "type": "string"
                }
            },
            "battle_status": {
                "default": null,
                "anyOf": [
                    {
                        "type": "object",
                        "properties": {
                            "in_game": {
                                "type": "boolean"
                            },
                            "away": {
                                "type": "boolean"
                            },
                            "ready": {
                                "type": "boolean"
                            },
                            "player_number": {
                                "type": "integer"
                            },
                            "team_colour": {
                                "type": "string"
                            },
                            "is_player": {
                                "type": "boolean"
                            },
                            "bonus": {
                                "type": "number"
                            },
                            "sync": {
                                "type": "object",
                                "patternProperties": {
                                    "^.*$": {
                                        "type": "number"
                                    }
                                },
                                "additionalProperties": false
                            },
                            "faction": {
                                "type": "string"
                            },
                            "lobby_id": {
                                "type": "integer"
                            },
                            "party_id": {
                                "type": "integer"
                            },
                            "clan_tag": {
                                "type": "string"
                            },
                            "muted": {
                                "type": "boolean"
                            }
                        },
                        "required": [
                            "in_game",
                            "away",
                            "ready",
                            "player_number",
                            "team_colour",
                            "is_player",
                            "bonus",
                            "sync",
                            "faction",
                            "lobby_id",
                            "party_id",
                            "clan_tag",
                            "muted"
                        ]
                    },
                    {
                        "type": "null"
                    }
                ]
            }
        },
        "required": [
            "id",
            "name",
            "is_bot",
            "clan_id",
            "icons",
            "roles",
            "battle_status"
        ]
    },
    {
        "$id": "privateUser",
        "allOf": [
            {
                "$ref": "user"
            },
            {
                "type": "object",
                "properties": {
                    "permissions": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "friends": {
                        "$ref": "userIds"
                    },
                    "friend_requests": {
                        "$ref": "userIds"
                    },
                    "ignores": {
                        "$ref": "userIds"
                    }
                },
                "required": [
                    "permissions",
                    "friends",
                    "friend_requests",
                    "ignores"
                ]
            }
        ]
    },
    {
        "type": "object",
        "properties": {
            "email": {
                "type": "string"
            },
            "password": {
                "minLength": 6,
                "type": "string"
            }
        },
        "required": [
            "email",
            "password"
        ],
        "$id": "auth/get_token/request"
    },
    {
        "type": "object",
        "properties": {
            "token": {
                "type": "string"
            }
        },
        "required": [
            "token"
        ],
        "$id": "auth/get_token/response"
    },
    {
        "type": "object",
        "properties": {
            "token": {
                "type": "string"
            },
            "app_name": {
                "type": "string"
            },
            "app_version": {
                "type": "string"
            },
            "app_hash": {
                "type": "string"
            }
        },
        "required": [
            "token",
            "app_name",
            "app_version",
            "app_hash"
        ],
        "$id": "auth/login/request"
    },
    {
        "$ref": "privateUser",
        "$id": "auth/login/response"
    },
    {
        "type": "object",
        "properties": {
            "token": {
                "type": "string"
            },
            "code": {
                "type": "string"
            }
        },
        "required": [
            "token",
            "code"
        ],
        "$id": "auth/verify/request"
    },
    {
        "$ref": "privateUser",
        "$id": "auth/verify/response"
    },
    {
        "type": "object",
        "properties": {},
        "$id": "account/who_am_i/request"
    },
    {
        "$ref": "privateUser",
        "$id": "account/who_am_i/response"
    },
    {
        "type": "object",
        "properties": {
            "ids": {
                "$ref": "userIds"
            }
        },
        "required": [
            "ids"
        ],
        "$id": "account/list_users/request"
    },
    {
        "type": "object",
        "properties": {
            "users": {
                "type": "array",
                "items": {
                    "$ref": "user"
                }
            }
        },
        "required": [
            "users"
        ],
        "$id": "account/list_users/response"
    },
    {
        "type": "object",
        "properties": {},
        "$id": "account/list_friends/request"
    },
    {
        "type": "array",
        "items": {
            "$ref": "user"
        },
        "$id": "account/list_friends/response"
    }
]