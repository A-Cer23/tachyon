<!-- THIS FILE IS AUTOMATICALLY GENERATED, PLEASE DO NOT EDIT IT MANUALLY -->

# Lobby

These commands relate to custom battles.

---
- [close](#close)
- [create](#create)
- [join](#join)
- [joined](#joined)
- [leave](#leave)
- [left](#left)
- [list](#list)
- [receiveMessage](#receivemessage)
- [sendMessage](#sendmessage)
- [subscribe](#subscribe)
- [unsubscribe](#unsubscribe)
- [updated](#updated)
---

## Close

Close an existing lobby.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Requires Role: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "lobby/close/request",
    "scopes": [
        "tachyon.lobby"
    ],
    "type": "object",
    "properties": {
        "type": {
            "const": "request",
            "type": "string"
        },
        "messageId": {
            "type": "string"
        },
        "commandId": {
            "const": "lobby/close",
            "type": "string"
        }
    },
    "required": [
        "type",
        "messageId",
        "commandId"
    ]
}
```

</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "incididunt",
    "commandId": "lobby/close"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyCloseRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/close";
}

```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "lobby/close/response",
    "scopes": [
        "tachyon.lobby"
    ],
    "anyOf": [
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/close",
                    "type": "string"
                },
                "status": {
                    "const": "success",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/close",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "internal_error",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/close",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "unauthorized",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/close",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "invalid_request",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/close",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "command_unimplemented",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        }
    ]
}
```

</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "tempor",
    "commandId": "lobby/close",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyCloseResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/close";
    status: "success";
}

```
---

## Create

Create a new lobby - intended for player clients to summon a dedicated host.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Requires Role: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "lobby/create/request",
    "scopes": [
        "tachyon.lobby"
    ],
    "type": "object",
    "properties": {
        "type": {
            "const": "request",
            "type": "string"
        },
        "messageId": {
            "type": "string"
        },
        "commandId": {
            "const": "lobby/create",
            "type": "string"
        },
        "data": {
            "examples": [
                {
                    "title": "8v8 | All Welcome",
                    "private": false,
                    "region": "EU",
                    "maxPlayers": 16
                }
            ],
            "type": "object",
            "properties": {
                "title": {
                    "minLength": 2,
                    "maxLength": 30,
                    "type": "string"
                },
                "private": {
                    "default": true,
                    "type": "boolean"
                },
                "region": {
                    "type": "string"
                },
                "maxPlayers": {
                    "minimum": 0,
                    "default": 16,
                    "type": "integer"
                }
            },
            "required": [
                "title",
                "private",
                "region",
                "maxPlayers"
            ]
        }
    },
    "required": [
        "type",
        "messageId",
        "commandId",
        "data"
    ]
}
```

</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "eiusmod",
    "commandId": "lobby/create",
    "data": {
        "title": "8v8 | All Welcome",
        "private": false,
        "region": "EU",
        "maxPlayers": 16
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyCreateRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/create";
    data: {
        title: string;
        private: boolean;
        region: string;
        maxPlayers: number;
    };
}

```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "lobby/create/response",
    "scopes": [
        "tachyon.lobby"
    ],
    "anyOf": [
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/create",
                    "type": "string"
                },
                "status": {
                    "const": "success",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/create",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "no_hosts_available",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/create",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "invalid_region",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/create",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "internal_error",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/create",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "unauthorized",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/create",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "invalid_request",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/create",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "command_unimplemented",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        }
    ]
}
```

</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "do",
    "commandId": "lobby/create",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyCreateResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/create";
    status: "success";
}

```
---

## Join

Join a custom lobby. Server will send a [joined](#joined) response containing the joined lobby's data. 
These commands are split because the server may want to force the client to join a battle without them explicitly requesting it.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Requires Role: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "lobby/join/request",
    "scopes": [
        "tachyon.lobby"
    ],
    "type": "object",
    "properties": {
        "type": {
            "const": "request",
            "type": "string"
        },
        "messageId": {
            "type": "string"
        },
        "commandId": {
            "const": "lobby/join",
            "type": "string"
        },
        "data": {
            "examples": [
                {
                    "lobbyId": 27,
                    "password": "fish"
                }
            ],
            "type": "object",
            "properties": {
                "lobbyId": {
                    "type": "string"
                },
                "password": {
                    "type": "string"
                }
            },
            "required": [
                "lobbyId"
            ]
        }
    },
    "required": [
        "type",
        "messageId",
        "commandId",
        "data"
    ]
}
```

</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "id",
    "commandId": "lobby/join",
    "data": {
        "lobbyId": 27,
        "password": "fish"
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyJoinRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/join";
    data: {
        lobbyId: string;
        password?: string;
    };
}

```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "lobby/join/response",
    "scopes": [
        "tachyon.lobby"
    ],
    "anyOf": [
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/join",
                    "type": "string"
                },
                "status": {
                    "const": "success",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/join",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "locked",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/join",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "requires_password",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/join",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "invalid_password",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/join",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "max_participants_reached",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/join",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "rank_too_low",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/join",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "rank_too_high",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/join",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "banned",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/join",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "internal_error",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/join",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "unauthorized",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/join",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "invalid_request",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/join",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "command_unimplemented",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        }
    ]
}
```

</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "sint",
    "commandId": "lobby/join",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyJoinResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/join";
    status: "success";
}

```
---

## Joined

Sent when the client successfully joins a lobby. Can also be sent at any time by the server to forcibly make the client join a lobby.

- Endpoint Type: **Event**
- Source: **Server**
- Target: **User**
- Requires Role: `tachyon.lobby`

### Event

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "lobby/joined/event",
    "scopes": [
        "tachyon.lobby"
    ],
    "type": "object",
    "properties": {
        "type": {
            "const": "event",
            "type": "string"
        },
        "messageId": {
            "type": "string"
        },
        "commandId": {
            "const": "lobby/joined",
            "type": "string"
        },
        "data": {
            "examples": [
                {
                    "battleId": 27,
                    "hostId": 822,
                    "engine": "105.1.1-1821-gaca6f20 BAR105",
                    "game": "Beyond All Reason test-23561-0abff7c",
                    "map": "Red Comet Remake 1.8",
                    "startPosType": 2,
                    "startAreas": {
                        "0": {
                            "x": 0,
                            "y": 0,
                            "width": 1,
                            "height": 0.3
                        },
                        "1": {
                            "x": 0,
                            "y": 0.7,
                            "width": 1,
                            "height": 0.3
                        }
                    },
                    "startTime": 1705432698,
                    "ip": "121.32.201.76",
                    "port": 41403,
                    "scriptPassword": "10sdfi90sid0sjkdf",
                    "modOptions": {
                        "emprework": 0
                    },
                    "bots": [],
                    "users": []
                }
            ],
            "type": "object",
            "properties": {
                "battleId": {
                    "type": "string"
                },
                "hostId": {
                    "type": "string"
                },
                "engine": {
                    "type": "string"
                },
                "game": {
                    "type": "string"
                },
                "map": {
                    "type": "string"
                },
                "startPosType": {
                    "anyOf": [
                        {
                            "description": "Fixed",
                            "const": 0,
                            "type": "number"
                        },
                        {
                            "description": "Random",
                            "const": 1,
                            "type": "number"
                        },
                        {
                            "description": "Boxes",
                            "const": 2,
                            "type": "number"
                        }
                    ]
                },
                "startAreas": {
                    "type": "object",
                    "patternProperties": {
                        "^(0|[1-9][0-9]*)$": {
                            "examples": [
                                {
                                    "x": 0,
                                    "y": 0,
                                    "width": 1,
                                    "height": 0.3
                                }
                            ],
                            "type": "object",
                            "properties": {
                                "x": {
                                    "type": "number"
                                },
                                "y": {
                                    "type": "number"
                                },
                                "width": {
                                    "type": "number"
                                },
                                "height": {
                                    "type": "number"
                                }
                            },
                            "required": [
                                "x",
                                "y",
                                "width",
                                "height"
                            ]
                        }
                    }
                },
                "startTime": {
                    "anyOf": [
                        {
                            "description": "Unix time",
                            "examples": [
                                1705432698,
                                null
                            ],
                            "type": "integer"
                        },
                        {
                            "type": "null"
                        }
                    ]
                },
                "ip": {
                    "anyOf": [
                        {
                            "type": "string"
                        },
                        {
                            "type": "null"
                        }
                    ]
                },
                "port": {
                    "anyOf": [
                        {
                            "type": "integer"
                        },
                        {
                            "type": "null"
                        }
                    ]
                },
                "scriptPassword": {
                    "anyOf": [
                        {
                            "type": "string"
                        },
                        {
                            "type": "null"
                        }
                    ]
                },
                "modOptions": {
                    "type": "object",
                    "patternProperties": {
                        "^(.*)$": {}
                    }
                },
                "bots": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "playerId": {
                                "type": "integer"
                            },
                            "teamId": {
                                "type": "integer"
                            },
                            "color": {
                                "type": "string"
                            },
                            "bonus": {
                                "type": "number"
                            },
                            "inGame": {
                                "type": "boolean"
                            },
                            "isSpectator": {
                                "const": false,
                                "type": "boolean"
                            },
                            "isBot": {
                                "const": true,
                                "type": "boolean"
                            },
                            "ownerId": {
                                "type": "string"
                            },
                            "aiShortName": {
                                "type": "string"
                            },
                            "name": {
                                "type": "string"
                            },
                            "aiOptions": {
                                "type": "object",
                                "patternProperties": {
                                    "^(.*)$": {}
                                }
                            },
                            "faction": {
                                "type": "string"
                            }
                        },
                        "required": [
                            "playerId",
                            "teamId",
                            "color",
                            "bonus",
                            "inGame",
                            "isSpectator",
                            "isBot",
                            "ownerId",
                            "aiShortName",
                            "name",
                            "aiOptions",
                            "faction"
                        ]
                    }
                },
                "users": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "userId": {
                                "type": "string"
                            },
                            "username": {
                                "type": "string"
                            },
                            "displayName": {
                                "type": "string"
                            },
                            "clanId": {
                                "anyOf": [
                                    {
                                        "type": "string"
                                    },
                                    {
                                        "type": "null"
                                    }
                                ]
                            },
                            "partyId": {
                                "anyOf": [
                                    {
                                        "type": "string"
                                    },
                                    {
                                        "type": "null"
                                    }
                                ]
                            },
                            "scopes": {
                                "type": "array",
                                "items": {
                                    "type": "string"
                                }
                            },
                            "countryCode": {
                                "type": "string"
                            },
                            "status": {
                                "anyOf": [
                                    {
                                        "const": "offline",
                                        "type": "string"
                                    },
                                    {
                                        "const": "menu",
                                        "type": "string"
                                    },
                                    {
                                        "const": "playing",
                                        "type": "string"
                                    },
                                    {
                                        "const": "lobby",
                                        "type": "string"
                                    }
                                ]
                            },
                            "battleStatus": {
                                "anyOf": [
                                    {
                                        "allOf": [
                                            {
                                                "type": "object",
                                                "properties": {
                                                    "battleId": {
                                                        "type": "string"
                                                    }
                                                },
                                                "required": [
                                                    "battleId"
                                                ]
                                            },
                                            {
                                                "anyOf": [
                                                    {
                                                        "type": "object",
                                                        "allOf": [
                                                            {
                                                                "type": "object",
                                                                "properties": {
                                                                    "playerId": {
                                                                        "type": "integer"
                                                                    },
                                                                    "teamId": {
                                                                        "type": "integer"
                                                                    },
                                                                    "color": {
                                                                        "type": "string"
                                                                    },
                                                                    "bonus": {
                                                                        "type": "number"
                                                                    },
                                                                    "inGame": {
                                                                        "type": "boolean"
                                                                    }
                                                                },
                                                                "required": [
                                                                    "playerId",
                                                                    "teamId",
                                                                    "color",
                                                                    "bonus",
                                                                    "inGame"
                                                                ]
                                                            },
                                                            {
                                                                "type": "object",
                                                                "properties": {
                                                                    "isSpectator": {
                                                                        "const": false,
                                                                        "type": "boolean"
                                                                    },
                                                                    "isBot": {
                                                                        "const": false,
                                                                        "type": "boolean"
                                                                    },
                                                                    "ready": {
                                                                        "type": "boolean"
                                                                    },
                                                                    "sync": {
                                                                        "type": "object",
                                                                        "properties": {
                                                                            "engine": {
                                                                                "type": "number"
                                                                            },
                                                                            "game": {
                                                                                "type": "number"
                                                                            },
                                                                            "map": {
                                                                                "type": "number"
                                                                            }
                                                                        },
                                                                        "required": [
                                                                            "engine",
                                                                            "game",
                                                                            "map"
                                                                        ]
                                                                    }
                                                                },
                                                                "required": [
                                                                    "isSpectator",
                                                                    "isBot",
                                                                    "ready",
                                                                    "sync"
                                                                ]
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "type": "object",
                                                        "properties": {
                                                            "isSpectator": {
                                                                "const": true,
                                                                "type": "boolean"
                                                            },
                                                            "isBot": {
                                                                "const": false,
                                                                "type": "boolean"
                                                            }
                                                        },
                                                        "required": [
                                                            "isSpectator",
                                                            "isBot"
                                                        ]
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    {
                                        "type": "null"
                                    }
                                ]
                            }
                        },
                        "required": [
                            "userId",
                            "username",
                            "displayName",
                            "clanId",
                            "partyId",
                            "scopes",
                            "status",
                            "battleStatus"
                        ]
                    }
                }
            },
            "required": [
                "battleId",
                "hostId",
                "engine",
                "game",
                "map",
                "startPosType",
                "startAreas",
                "startTime",
                "ip",
                "port",
                "scriptPassword",
                "modOptions",
                "bots",
                "users"
            ]
        }
    },
    "required": [
        "type",
        "messageId",
        "commandId",
        "data"
    ]
}
```

</details>

<details>
<summary>Example</summary>

```json
{
    "type": "event",
    "messageId": "nulla",
    "commandId": "lobby/joined",
    "data": {
        "battleId": 27,
        "hostId": 822,
        "engine": "105.1.1-1821-gaca6f20 BAR105",
        "game": "Beyond All Reason test-23561-0abff7c",
        "map": "Red Comet Remake 1.8",
        "startPosType": 2,
        "startAreas": {
            "0": {
                "x": 0,
                "y": 0,
                "width": 1,
                "height": 0.3
            },
            "1": {
                "x": 0,
                "y": 0.7,
                "width": 1,
                "height": 0.3
            }
        },
        "startTime": 1705432698,
        "ip": "121.32.201.76",
        "port": 41403,
        "scriptPassword": "10sdfi90sid0sjkdf",
        "modOptions": {
            "emprework": 0
        },
        "bots": [],
        "users": []
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyJoinedEvent {
    type: "event";
    messageId: string;
    commandId: "lobby/joined";
    data: {
        battleId: string;
        hostId: string;
        engine: string;
        game: string;
        map: string;
        startPosType: 0 | 1 | 2;
        startAreas: {
            [k: string]: {
                x: number;
                y: number;
                width: number;
                height: number;
            };
        };
        startTime: number | null;
        ip: string | null;
        port: number | null;
        scriptPassword: string | null;
        modOptions: {
            [k: string]: unknown;
        };
        bots: {
            playerId: number;
            teamId: number;
            color: string;
            bonus: number;
            inGame: boolean;
            isSpectator: false;
            isBot: true;
            ownerId: string;
            aiShortName: string;
            name: string;
            aiOptions: {
                [k: string]: unknown;
            };
            faction: string;
        }[];
        users: {
            userId: string;
            username: string;
            displayName: string;
            clanId: string | null;
            partyId: string | null;
            scopes: string[];
            countryCode?: string;
            status: "offline" | "menu" | "playing" | "lobby";
            battleStatus:
                | ({
                      battleId: string;
                  } & (
                      | ({
                            playerId: number;
                            teamId: number;
                            color: string;
                            bonus: number;
                            inGame: boolean;
                        } & {
                            isSpectator: false;
                            isBot: false;
                            ready: boolean;
                            sync: {
                                engine: number;
                                game: number;
                                map: number;
                            };
                        })
                      | {
                            isSpectator: true;
                            isBot: false;
                        }
                  ))
                | null;
        }[];
    };
}

```
---

## Leave

Leave the current lobby.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Requires Role: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "lobby/leave/request",
    "scopes": [
        "tachyon.lobby"
    ],
    "type": "object",
    "properties": {
        "type": {
            "const": "request",
            "type": "string"
        },
        "messageId": {
            "type": "string"
        },
        "commandId": {
            "const": "lobby/leave",
            "type": "string"
        }
    },
    "required": [
        "type",
        "messageId",
        "commandId"
    ]
}
```

</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "dolor",
    "commandId": "lobby/leave"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyLeaveRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/leave";
}

```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "lobby/leave/response",
    "scopes": [
        "tachyon.lobby"
    ],
    "anyOf": [
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/leave",
                    "type": "string"
                },
                "status": {
                    "const": "success",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/leave",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "no_lobby",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/leave",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "internal_error",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/leave",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "unauthorized",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/leave",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "invalid_request",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/leave",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "command_unimplemented",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        }
    ]
}
```

</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "aute",
    "commandId": "lobby/leave",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyLeaveResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/leave";
    status: "success";
}

```
---

## Left

Sent when the server removes the client from a lobby.

- Endpoint Type: **Event**
- Source: **Server**
- Target: **User**
- Requires Role: `tachyon.lobby`

### Event

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "lobby/left/event",
    "scopes": [
        "tachyon.lobby"
    ],
    "type": "object",
    "properties": {
        "type": {
            "const": "event",
            "type": "string"
        },
        "messageId": {
            "type": "string"
        },
        "commandId": {
            "const": "lobby/left",
            "type": "string"
        }
    },
    "required": [
        "type",
        "messageId",
        "commandId"
    ]
}
```

</details>

<details>
<summary>Example</summary>

```json
{
    "type": "event",
    "messageId": "nisi",
    "commandId": "lobby/left"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyLeftEvent {
    type: "event";
    messageId: string;
    commandId: "lobby/left";
}

```
---

## List

Returns all custom lobbies.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Requires Role: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "lobby/list/request",
    "scopes": [
        "tachyon.lobby"
    ],
    "type": "object",
    "properties": {
        "type": {
            "const": "request",
            "type": "string"
        },
        "messageId": {
            "type": "string"
        },
        "commandId": {
            "const": "lobby/list",
            "type": "string"
        }
    },
    "required": [
        "type",
        "messageId",
        "commandId"
    ]
}
```

</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "ullamco",
    "commandId": "lobby/list"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyListRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/list";
}

```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "lobby/list/response",
    "scopes": [
        "tachyon.lobby"
    ],
    "anyOf": [
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/list",
                    "type": "string"
                },
                "status": {
                    "const": "success",
                    "type": "string"
                },
                "data": {
                    "type": "object",
                    "properties": {
                        "battles": {
                            "type": "array",
                            "items": {
                                "examples": [
                                    {
                                        "battleId": 27,
                                        "hostId": 822,
                                        "engine": "105.1.1-1821-gaca6f20 BAR105",
                                        "game": "Beyond All Reason test-23561-0abff7c",
                                        "map": "Red Comet Remake 1.8",
                                        "startPosType": 2,
                                        "startAreas": {
                                            "0": {
                                                "x": 0,
                                                "y": 0,
                                                "width": 1,
                                                "height": 0.3
                                            },
                                            "1": {
                                                "x": 0,
                                                "y": 0.7,
                                                "width": 1,
                                                "height": 0.3
                                            }
                                        },
                                        "startTime": 1705432698,
                                        "ip": "121.32.201.76",
                                        "port": 41403,
                                        "scriptPassword": "10sdfi90sid0sjkdf",
                                        "modOptions": {
                                            "emprework": 0
                                        },
                                        "bots": [],
                                        "users": [],
                                        "title": "8v8 | All Welcome",
                                        "bossIds": [
                                            123,
                                            456
                                        ],
                                        "locked": false,
                                        "passworded": false,
                                        "spectatorIds": [
                                            88
                                        ],
                                        "limits": {
                                            "minTeamsize": 3,
                                            "maxTeamsize": 3,
                                            "minRating": null,
                                            "maxRating": 25
                                        }
                                    }
                                ],
                                "type": "object",
                                "allOf": [
                                    {
                                        "examples": [
                                            {
                                                "battleId": 27,
                                                "hostId": 822,
                                                "engine": "105.1.1-1821-gaca6f20 BAR105",
                                                "game": "Beyond All Reason test-23561-0abff7c",
                                                "map": "Red Comet Remake 1.8",
                                                "startPosType": 2,
                                                "startAreas": {
                                                    "0": {
                                                        "x": 0,
                                                        "y": 0,
                                                        "width": 1,
                                                        "height": 0.3
                                                    },
                                                    "1": {
                                                        "x": 0,
                                                        "y": 0.7,
                                                        "width": 1,
                                                        "height": 0.3
                                                    }
                                                },
                                                "startTime": 1705432698,
                                                "ip": "121.32.201.76",
                                                "port": 41403,
                                                "scriptPassword": "10sdfi90sid0sjkdf",
                                                "modOptions": {
                                                    "emprework": 0
                                                },
                                                "bots": [],
                                                "users": []
                                            }
                                        ],
                                        "type": "object",
                                        "properties": {
                                            "battleId": {
                                                "type": "string"
                                            },
                                            "hostId": {
                                                "type": "string"
                                            },
                                            "engine": {
                                                "type": "string"
                                            },
                                            "game": {
                                                "type": "string"
                                            },
                                            "map": {
                                                "type": "string"
                                            },
                                            "startPosType": {
                                                "anyOf": [
                                                    {
                                                        "description": "Fixed",
                                                        "const": 0,
                                                        "type": "number"
                                                    },
                                                    {
                                                        "description": "Random",
                                                        "const": 1,
                                                        "type": "number"
                                                    },
                                                    {
                                                        "description": "Boxes",
                                                        "const": 2,
                                                        "type": "number"
                                                    }
                                                ]
                                            },
                                            "startAreas": {
                                                "type": "object",
                                                "patternProperties": {
                                                    "^(0|[1-9][0-9]*)$": {
                                                        "examples": [
                                                            {
                                                                "x": 0,
                                                                "y": 0,
                                                                "width": 1,
                                                                "height": 0.3
                                                            }
                                                        ],
                                                        "type": "object",
                                                        "properties": {
                                                            "x": {
                                                                "type": "number"
                                                            },
                                                            "y": {
                                                                "type": "number"
                                                            },
                                                            "width": {
                                                                "type": "number"
                                                            },
                                                            "height": {
                                                                "type": "number"
                                                            }
                                                        },
                                                        "required": [
                                                            "x",
                                                            "y",
                                                            "width",
                                                            "height"
                                                        ]
                                                    }
                                                }
                                            },
                                            "startTime": {
                                                "anyOf": [
                                                    {
                                                        "description": "Unix time",
                                                        "examples": [
                                                            1705432698,
                                                            null
                                                        ],
                                                        "type": "integer"
                                                    },
                                                    {
                                                        "type": "null"
                                                    }
                                                ]
                                            },
                                            "ip": {
                                                "anyOf": [
                                                    {
                                                        "type": "string"
                                                    },
                                                    {
                                                        "type": "null"
                                                    }
                                                ]
                                            },
                                            "port": {
                                                "anyOf": [
                                                    {
                                                        "type": "integer"
                                                    },
                                                    {
                                                        "type": "null"
                                                    }
                                                ]
                                            },
                                            "scriptPassword": {
                                                "anyOf": [
                                                    {
                                                        "type": "string"
                                                    },
                                                    {
                                                        "type": "null"
                                                    }
                                                ]
                                            },
                                            "modOptions": {
                                                "type": "object",
                                                "patternProperties": {
                                                    "^(.*)$": {}
                                                }
                                            },
                                            "bots": {
                                                "type": "array",
                                                "items": {
                                                    "type": "object",
                                                    "properties": {
                                                        "playerId": {
                                                            "type": "integer"
                                                        },
                                                        "teamId": {
                                                            "type": "integer"
                                                        },
                                                        "color": {
                                                            "type": "string"
                                                        },
                                                        "bonus": {
                                                            "type": "number"
                                                        },
                                                        "inGame": {
                                                            "type": "boolean"
                                                        },
                                                        "isSpectator": {
                                                            "const": false,
                                                            "type": "boolean"
                                                        },
                                                        "isBot": {
                                                            "const": true,
                                                            "type": "boolean"
                                                        },
                                                        "ownerId": {
                                                            "type": "string"
                                                        },
                                                        "aiShortName": {
                                                            "type": "string"
                                                        },
                                                        "name": {
                                                            "type": "string"
                                                        },
                                                        "aiOptions": {
                                                            "type": "object",
                                                            "patternProperties": {
                                                                "^(.*)$": {}
                                                            }
                                                        },
                                                        "faction": {
                                                            "type": "string"
                                                        }
                                                    },
                                                    "required": [
                                                        "playerId",
                                                        "teamId",
                                                        "color",
                                                        "bonus",
                                                        "inGame",
                                                        "isSpectator",
                                                        "isBot",
                                                        "ownerId",
                                                        "aiShortName",
                                                        "name",
                                                        "aiOptions",
                                                        "faction"
                                                    ]
                                                }
                                            },
                                            "users": {
                                                "type": "array",
                                                "items": {
                                                    "type": "object",
                                                    "properties": {
                                                        "userId": {
                                                            "type": "string"
                                                        },
                                                        "username": {
                                                            "type": "string"
                                                        },
                                                        "displayName": {
                                                            "type": "string"
                                                        },
                                                        "clanId": {
                                                            "anyOf": [
                                                                {
                                                                    "type": "string"
                                                                },
                                                                {
                                                                    "type": "null"
                                                                }
                                                            ]
                                                        },
                                                        "partyId": {
                                                            "anyOf": [
                                                                {
                                                                    "type": "string"
                                                                },
                                                                {
                                                                    "type": "null"
                                                                }
                                                            ]
                                                        },
                                                        "scopes": {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "string"
                                                            }
                                                        },
                                                        "countryCode": {
                                                            "type": "string"
                                                        },
                                                        "status": {
                                                            "anyOf": [
                                                                {
                                                                    "const": "offline",
                                                                    "type": "string"
                                                                },
                                                                {
                                                                    "const": "menu",
                                                                    "type": "string"
                                                                },
                                                                {
                                                                    "const": "playing",
                                                                    "type": "string"
                                                                },
                                                                {
                                                                    "const": "lobby",
                                                                    "type": "string"
                                                                }
                                                            ]
                                                        },
                                                        "battleStatus": {
                                                            "anyOf": [
                                                                {
                                                                    "allOf": [
                                                                        {
                                                                            "type": "object",
                                                                            "properties": {
                                                                                "battleId": {
                                                                                    "type": "string"
                                                                                }
                                                                            },
                                                                            "required": [
                                                                                "battleId"
                                                                            ]
                                                                        },
                                                                        {
                                                                            "anyOf": [
                                                                                {
                                                                                    "type": "object",
                                                                                    "allOf": [
                                                                                        {
                                                                                            "type": "object",
                                                                                            "properties": {
                                                                                                "playerId": {
                                                                                                    "type": "integer"
                                                                                                },
                                                                                                "teamId": {
                                                                                                    "type": "integer"
                                                                                                },
                                                                                                "color": {
                                                                                                    "type": "string"
                                                                                                },
                                                                                                "bonus": {
                                                                                                    "type": "number"
                                                                                                },
                                                                                                "inGame": {
                                                                                                    "type": "boolean"
                                                                                                }
                                                                                            },
                                                                                            "required": [
                                                                                                "playerId",
                                                                                                "teamId",
                                                                                                "color",
                                                                                                "bonus",
                                                                                                "inGame"
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "type": "object",
                                                                                            "properties": {
                                                                                                "isSpectator": {
                                                                                                    "const": false,
                                                                                                    "type": "boolean"
                                                                                                },
                                                                                                "isBot": {
                                                                                                    "const": false,
                                                                                                    "type": "boolean"
                                                                                                },
                                                                                                "ready": {
                                                                                                    "type": "boolean"
                                                                                                },
                                                                                                "sync": {
                                                                                                    "type": "object",
                                                                                                    "properties": {
                                                                                                        "engine": {
                                                                                                            "type": "number"
                                                                                                        },
                                                                                                        "game": {
                                                                                                            "type": "number"
                                                                                                        },
                                                                                                        "map": {
                                                                                                            "type": "number"
                                                                                                        }
                                                                                                    },
                                                                                                    "required": [
                                                                                                        "engine",
                                                                                                        "game",
                                                                                                        "map"
                                                                                                    ]
                                                                                                }
                                                                                            },
                                                                                            "required": [
                                                                                                "isSpectator",
                                                                                                "isBot",
                                                                                                "ready",
                                                                                                "sync"
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "object",
                                                                                    "properties": {
                                                                                        "isSpectator": {
                                                                                            "const": true,
                                                                                            "type": "boolean"
                                                                                        },
                                                                                        "isBot": {
                                                                                            "const": false,
                                                                                            "type": "boolean"
                                                                                        }
                                                                                    },
                                                                                    "required": [
                                                                                        "isSpectator",
                                                                                        "isBot"
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "null"
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "required": [
                                                        "userId",
                                                        "username",
                                                        "displayName",
                                                        "clanId",
                                                        "partyId",
                                                        "scopes",
                                                        "status",
                                                        "battleStatus"
                                                    ]
                                                }
                                            }
                                        },
                                        "required": [
                                            "battleId",
                                            "hostId",
                                            "engine",
                                            "game",
                                            "map",
                                            "startPosType",
                                            "startAreas",
                                            "startTime",
                                            "ip",
                                            "port",
                                            "scriptPassword",
                                            "modOptions",
                                            "bots",
                                            "users"
                                        ]
                                    },
                                    {
                                        "type": "object",
                                        "properties": {
                                            "title": {
                                                "type": "string"
                                            },
                                            "locked": {
                                                "type": "boolean"
                                            },
                                            "passworded": {
                                                "type": "boolean"
                                            },
                                            "bossIds": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                }
                                            },
                                            "joinQueueIds": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                }
                                            },
                                            "limits": {
                                                "type": "object",
                                                "properties": {
                                                    "minTeamsize": {
                                                        "anyOf": [
                                                            {
                                                                "type": "integer"
                                                            },
                                                            {
                                                                "type": "null"
                                                            }
                                                        ]
                                                    },
                                                    "maxTeamsize": {
                                                        "anyOf": [
                                                            {
                                                                "type": "integer"
                                                            },
                                                            {
                                                                "type": "null"
                                                            }
                                                        ]
                                                    },
                                                    "minRating": {
                                                        "anyOf": [
                                                            {
                                                                "type": "integer"
                                                            },
                                                            {
                                                                "type": "null"
                                                            }
                                                        ]
                                                    },
                                                    "maxRating": {
                                                        "anyOf": [
                                                            {
                                                                "type": "integer"
                                                            },
                                                            {
                                                                "type": "null"
                                                            }
                                                        ]
                                                    }
                                                },
                                                "required": [
                                                    "minTeamsize",
                                                    "maxTeamsize",
                                                    "minRating",
                                                    "maxRating"
                                                ]
                                            }
                                        },
                                        "required": [
                                            "title",
                                            "locked",
                                            "passworded",
                                            "bossIds",
                                            "joinQueueIds",
                                            "limits"
                                        ]
                                    }
                                ]
                            }
                        }
                    },
                    "required": [
                        "battles"
                    ]
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "data"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/list",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "internal_error",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/list",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "unauthorized",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/list",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "invalid_request",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/list",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "command_unimplemented",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        }
    ]
}
```

</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "exercitation",
    "commandId": "lobby/list",
    "status": "success",
    "data": {
        "battles": [
            {
                "battleId": 27,
                "hostId": 822,
                "engine": "105.1.1-1821-gaca6f20 BAR105",
                "game": "Beyond All Reason test-23561-0abff7c",
                "map": "Red Comet Remake 1.8",
                "startPosType": 2,
                "startAreas": {
                    "0": {
                        "x": 0,
                        "y": 0,
                        "width": 1,
                        "height": 0.3
                    },
                    "1": {
                        "x": 0,
                        "y": 0.7,
                        "width": 1,
                        "height": 0.3
                    }
                },
                "startTime": 1705432698,
                "ip": "121.32.201.76",
                "port": 41403,
                "scriptPassword": "10sdfi90sid0sjkdf",
                "modOptions": {
                    "emprework": 0
                },
                "bots": [],
                "users": [],
                "title": "8v8 | All Welcome",
                "bossIds": [
                    123,
                    456
                ],
                "locked": false,
                "passworded": false,
                "spectatorIds": [
                    88
                ],
                "limits": {
                    "minTeamsize": 3,
                    "maxTeamsize": 3,
                    "minRating": null,
                    "maxRating": 25
                }
            }
        ]
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyListResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/list";
    status: "success";
    data: {
        battles: ({
            battleId: string;
            hostId: string;
            engine: string;
            game: string;
            map: string;
            startPosType: 0 | 1 | 2;
            startAreas: {
                [k: string]: {
                    x: number;
                    y: number;
                    width: number;
                    height: number;
                };
            };
            startTime: number | null;
            ip: string | null;
            port: number | null;
            scriptPassword: string | null;
            modOptions: {
                [k: string]: unknown;
            };
            bots: {
                playerId: number;
                teamId: number;
                color: string;
                bonus: number;
                inGame: boolean;
                isSpectator: false;
                isBot: true;
                ownerId: string;
                aiShortName: string;
                name: string;
                aiOptions: {
                    [k: string]: unknown;
                };
                faction: string;
            }[];
            users: {
                userId: string;
                username: string;
                displayName: string;
                clanId: string | null;
                partyId: string | null;
                scopes: string[];
                countryCode?: string;
                status: "offline" | "menu" | "playing" | "lobby";
                battleStatus:
                    | ({
                          battleId: string;
                      } & (
                          | ({
                                playerId: number;
                                teamId: number;
                                color: string;
                                bonus: number;
                                inGame: boolean;
                            } & {
                                isSpectator: false;
                                isBot: false;
                                ready: boolean;
                                sync: {
                                    engine: number;
                                    game: number;
                                    map: number;
                                };
                            })
                          | {
                                isSpectator: true;
                                isBot: false;
                            }
                      ))
                    | null;
            }[];
        } & {
            title: string;
            locked: boolean;
            passworded: boolean;
            bossIds: string[];
            joinQueueIds: string[];
            limits: {
                minTeamsize: number | null;
                maxTeamsize: number | null;
                minRating: number | null;
                maxRating: number | null;
            };
        })[];
    };
}

```
---

## ReceiveMessage

Receive a lobby message. See [sendMessage](#sendmessage) for outgoing messages.

- Endpoint Type: **Event**
- Source: **Server**
- Target: **User**
- Requires Role: `tachyon.lobby`

### Event

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "lobby/receiveMessage/event",
    "scopes": [
        "tachyon.lobby"
    ],
    "type": "object",
    "properties": {
        "type": {
            "const": "event",
            "type": "string"
        },
        "messageId": {
            "type": "string"
        },
        "commandId": {
            "const": "lobby/receiveMessage",
            "type": "string"
        },
        "data": {
            "examples": [
                {
                    "userId": 27,
                    "message": "Hello lobby!"
                }
            ],
            "type": "object",
            "properties": {
                "userId": {
                    "type": "string"
                },
                "message": {
                    "type": "string"
                }
            },
            "required": [
                "userId",
                "message"
            ]
        }
    },
    "required": [
        "type",
        "messageId",
        "commandId",
        "data"
    ]
}
```

</details>

<details>
<summary>Example</summary>

```json
{
    "type": "event",
    "messageId": "Ut velit",
    "commandId": "lobby/receiveMessage",
    "data": {
        "userId": 27,
        "message": "Hello lobby!"
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyReceiveMessageEvent {
    type: "event";
    messageId: string;
    commandId: "lobby/receiveMessage";
    data: {
        userId: string;
        message: string;
    };
}

```
---

## SendMessage

Send a lobby message. See [receiveMessage](#receivemessage) for incoming messages.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Requires Role: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "lobby/sendMessage/request",
    "scopes": [
        "tachyon.lobby"
    ],
    "type": "object",
    "properties": {
        "type": {
            "const": "request",
            "type": "string"
        },
        "messageId": {
            "type": "string"
        },
        "commandId": {
            "const": "lobby/sendMessage",
            "type": "string"
        },
        "data": {
            "examples": [
                {
                    "message": "Hello lobby!"
                }
            ],
            "type": "object",
            "properties": {
                "message": {
                    "maxLength": 300,
                    "type": "string"
                }
            },
            "required": [
                "message"
            ]
        }
    },
    "required": [
        "type",
        "messageId",
        "commandId",
        "data"
    ]
}
```

</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "Ut in",
    "commandId": "lobby/sendMessage",
    "data": {
        "message": "Hello lobby!"
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbySendMessageRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/sendMessage";
    data: {
        message: string;
    };
}

```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "lobby/sendMessage/response",
    "scopes": [
        "tachyon.lobby"
    ],
    "anyOf": [
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/sendMessage",
                    "type": "string"
                },
                "status": {
                    "const": "success",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/sendMessage",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "not_in_lobby",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/sendMessage",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "muted",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/sendMessage",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "internal_error",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/sendMessage",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "unauthorized",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/sendMessage",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "invalid_request",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/sendMessage",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "command_unimplemented",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        }
    ]
}
```

</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "aliqua in",
    "commandId": "lobby/sendMessage",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbySendMessageResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/sendMessage";
    status: "success";
}

```
---

## Subscribe

Subscribe to custom battle updates. By default, updates for the user's own battle will always be subscribed to. If successful, the Tachyon server should respond with full data about the subscribed battles, and then continue to send partial (stateful) updates via the [updated](#updated) response.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Requires Role: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "lobby/subscribe/request",
    "scopes": [
        "tachyon.lobby"
    ],
    "type": "object",
    "properties": {
        "type": {
            "const": "request",
            "type": "string"
        },
        "messageId": {
            "type": "string"
        },
        "commandId": {
            "const": "lobby/subscribe",
            "type": "string"
        },
        "data": {
            "type": "object",
            "properties": {
                "battleIds": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            },
            "required": [
                "battleIds"
            ]
        }
    },
    "required": [
        "type",
        "messageId",
        "commandId",
        "data"
    ]
}
```

</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "magna commodo",
    "commandId": "lobby/subscribe",
    "data": {
        "battleIds": [
            "magna commodo",
            "magna commodo"
        ]
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbySubscribeRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/subscribe";
    data: {
        battleIds: string[];
    };
}

```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "lobby/subscribe/response",
    "scopes": [
        "tachyon.lobby"
    ],
    "anyOf": [
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/subscribe",
                    "type": "string"
                },
                "status": {
                    "const": "success",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/subscribe",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "internal_error",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/subscribe",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "unauthorized",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/subscribe",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "invalid_request",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/subscribe",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "command_unimplemented",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        }
    ]
}
```

</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "id ea",
    "commandId": "lobby/subscribe",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbySubscribeResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/subscribe";
    status: "success";
}

```
---

## Unsubscribe

Unsubscribe from custom battle updates. If battleIds is passed only updates to those battles will be stopped, otherwise this will stop updates for all battles.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Requires Role: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "lobby/unsubscribe/request",
    "scopes": [
        "tachyon.lobby"
    ],
    "type": "object",
    "properties": {
        "type": {
            "const": "request",
            "type": "string"
        },
        "messageId": {
            "type": "string"
        },
        "commandId": {
            "const": "lobby/unsubscribe",
            "type": "string"
        },
        "data": {
            "type": "object",
            "properties": {
                "battleIds": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            }
        }
    },
    "required": [
        "type",
        "messageId",
        "commandId",
        "data"
    ]
}
```

</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "voluptate ullamco",
    "commandId": "lobby/unsubscribe",
    "data": {
        "battleIds": [
            "voluptate ullamco",
            "voluptate ullamco"
        ]
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyUnsubscribeRequest {
    type: "request";
    messageId: string;
    commandId: "lobby/unsubscribe";
    data: {
        battleIds?: string[];
    };
}

```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "lobby/unsubscribe/response",
    "scopes": [
        "tachyon.lobby"
    ],
    "anyOf": [
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/unsubscribe",
                    "type": "string"
                },
                "status": {
                    "const": "success",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/unsubscribe",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "cannot_unsub_own_battle",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/unsubscribe",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "internal_error",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/unsubscribe",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "unauthorized",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/unsubscribe",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "invalid_request",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/unsubscribe",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "command_unimplemented",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        }
    ]
}
```

</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "in exercitation",
    "commandId": "lobby/unsubscribe",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyUnsubscribeResponse {
    type: "response";
    messageId: string;
    commandId: "lobby/unsubscribe";
    status: "success";
}

```
---

## Updated

Server sends an array of partial battle objects whenever a subscribed battle changes in some way.

- Endpoint Type: **Event**
- Source: **Server**
- Target: **User**
- Requires Role: `tachyon.lobby`

### Event

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "lobby/updated/event",
    "scopes": [
        "tachyon.lobby"
    ],
    "type": "object",
    "properties": {
        "type": {
            "const": "event",
            "type": "string"
        },
        "messageId": {
            "type": "string"
        },
        "commandId": {
            "const": "lobby/updated",
            "type": "string"
        },
        "data": {
            "type": "object",
            "properties": {
                "battles": {
                    "type": "array",
                    "items": {
                        "examples": [
                            {
                                "title": "3v3 | Newbies only",
                                "limits": {
                                    "minTeamsize": 3,
                                    "maxTeamsize": 3,
                                    "minRating": null,
                                    "maxRating": 25
                                }
                            }
                        ],
                        "type": "object",
                        "allOf": [
                            {
                                "type": "object",
                                "properties": {
                                    "battleId": {
                                        "type": "string"
                                    },
                                    "hostId": {
                                        "type": "string"
                                    },
                                    "engine": {
                                        "type": "string"
                                    },
                                    "game": {
                                        "type": "string"
                                    },
                                    "map": {
                                        "type": "string"
                                    },
                                    "startPosType": {
                                        "anyOf": [
                                            {
                                                "description": "Fixed",
                                                "const": 0,
                                                "type": "number"
                                            },
                                            {
                                                "description": "Random",
                                                "const": 1,
                                                "type": "number"
                                            },
                                            {
                                                "description": "Boxes",
                                                "const": 2,
                                                "type": "number"
                                            }
                                        ]
                                    },
                                    "startAreas": {
                                        "type": "object",
                                        "patternProperties": {
                                            "^(0|[1-9][0-9]*)$": {
                                                "examples": [
                                                    {
                                                        "x": 0,
                                                        "y": 0,
                                                        "width": 1,
                                                        "height": 0.3
                                                    }
                                                ],
                                                "type": "object",
                                                "properties": {
                                                    "x": {
                                                        "type": "number"
                                                    },
                                                    "y": {
                                                        "type": "number"
                                                    },
                                                    "width": {
                                                        "type": "number"
                                                    },
                                                    "height": {
                                                        "type": "number"
                                                    }
                                                },
                                                "required": [
                                                    "x",
                                                    "y",
                                                    "width",
                                                    "height"
                                                ]
                                            }
                                        }
                                    },
                                    "startTime": {
                                        "anyOf": [
                                            {
                                                "description": "Unix time",
                                                "examples": [
                                                    1705432698,
                                                    null
                                                ],
                                                "type": "integer"
                                            },
                                            {
                                                "type": "null"
                                            }
                                        ]
                                    },
                                    "ip": {
                                        "anyOf": [
                                            {
                                                "type": "string"
                                            },
                                            {
                                                "type": "null"
                                            }
                                        ]
                                    },
                                    "port": {
                                        "anyOf": [
                                            {
                                                "type": "integer"
                                            },
                                            {
                                                "type": "null"
                                            }
                                        ]
                                    },
                                    "scriptPassword": {
                                        "anyOf": [
                                            {
                                                "type": "string"
                                            },
                                            {
                                                "type": "null"
                                            }
                                        ]
                                    },
                                    "modOptions": {
                                        "type": "object",
                                        "patternProperties": {
                                            "^(.*)$": {}
                                        }
                                    },
                                    "bots": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "properties": {
                                                "playerId": {
                                                    "type": "integer"
                                                },
                                                "teamId": {
                                                    "type": "integer"
                                                },
                                                "color": {
                                                    "type": "string"
                                                },
                                                "bonus": {
                                                    "type": "number"
                                                },
                                                "inGame": {
                                                    "type": "boolean"
                                                },
                                                "isSpectator": {
                                                    "const": false,
                                                    "type": "boolean"
                                                },
                                                "isBot": {
                                                    "const": true,
                                                    "type": "boolean"
                                                },
                                                "ownerId": {
                                                    "type": "string"
                                                },
                                                "aiShortName": {
                                                    "type": "string"
                                                },
                                                "name": {
                                                    "type": "string"
                                                },
                                                "aiOptions": {
                                                    "type": "object",
                                                    "patternProperties": {
                                                        "^(.*)$": {}
                                                    }
                                                },
                                                "faction": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "playerId",
                                                "teamId",
                                                "color",
                                                "bonus",
                                                "inGame",
                                                "isSpectator",
                                                "isBot",
                                                "ownerId",
                                                "aiShortName",
                                                "name",
                                                "aiOptions",
                                                "faction"
                                            ]
                                        }
                                    },
                                    "users": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "properties": {
                                                "userId": {
                                                    "type": "string"
                                                },
                                                "username": {
                                                    "type": "string"
                                                },
                                                "displayName": {
                                                    "type": "string"
                                                },
                                                "clanId": {
                                                    "anyOf": [
                                                        {
                                                            "type": "string"
                                                        },
                                                        {
                                                            "type": "null"
                                                        }
                                                    ]
                                                },
                                                "partyId": {
                                                    "anyOf": [
                                                        {
                                                            "type": "string"
                                                        },
                                                        {
                                                            "type": "null"
                                                        }
                                                    ]
                                                },
                                                "scopes": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    }
                                                },
                                                "countryCode": {
                                                    "type": "string"
                                                },
                                                "status": {
                                                    "anyOf": [
                                                        {
                                                            "const": "offline",
                                                            "type": "string"
                                                        },
                                                        {
                                                            "const": "menu",
                                                            "type": "string"
                                                        },
                                                        {
                                                            "const": "playing",
                                                            "type": "string"
                                                        },
                                                        {
                                                            "const": "lobby",
                                                            "type": "string"
                                                        }
                                                    ]
                                                },
                                                "battleStatus": {
                                                    "anyOf": [
                                                        {
                                                            "allOf": [
                                                                {
                                                                    "type": "object",
                                                                    "properties": {
                                                                        "battleId": {
                                                                            "type": "string"
                                                                        }
                                                                    },
                                                                    "required": [
                                                                        "battleId"
                                                                    ]
                                                                },
                                                                {
                                                                    "anyOf": [
                                                                        {
                                                                            "type": "object",
                                                                            "allOf": [
                                                                                {
                                                                                    "type": "object",
                                                                                    "properties": {
                                                                                        "playerId": {
                                                                                            "type": "integer"
                                                                                        },
                                                                                        "teamId": {
                                                                                            "type": "integer"
                                                                                        },
                                                                                        "color": {
                                                                                            "type": "string"
                                                                                        },
                                                                                        "bonus": {
                                                                                            "type": "number"
                                                                                        },
                                                                                        "inGame": {
                                                                                            "type": "boolean"
                                                                                        }
                                                                                    },
                                                                                    "required": [
                                                                                        "playerId",
                                                                                        "teamId",
                                                                                        "color",
                                                                                        "bonus",
                                                                                        "inGame"
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "type": "object",
                                                                                    "properties": {
                                                                                        "isSpectator": {
                                                                                            "const": false,
                                                                                            "type": "boolean"
                                                                                        },
                                                                                        "isBot": {
                                                                                            "const": false,
                                                                                            "type": "boolean"
                                                                                        },
                                                                                        "ready": {
                                                                                            "type": "boolean"
                                                                                        },
                                                                                        "sync": {
                                                                                            "type": "object",
                                                                                            "properties": {
                                                                                                "engine": {
                                                                                                    "type": "number"
                                                                                                },
                                                                                                "game": {
                                                                                                    "type": "number"
                                                                                                },
                                                                                                "map": {
                                                                                                    "type": "number"
                                                                                                }
                                                                                            },
                                                                                            "required": [
                                                                                                "engine",
                                                                                                "game",
                                                                                                "map"
                                                                                            ]
                                                                                        }
                                                                                    },
                                                                                    "required": [
                                                                                        "isSpectator",
                                                                                        "isBot",
                                                                                        "ready",
                                                                                        "sync"
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "type": "object",
                                                                            "properties": {
                                                                                "isSpectator": {
                                                                                    "const": true,
                                                                                    "type": "boolean"
                                                                                },
                                                                                "isBot": {
                                                                                    "const": false,
                                                                                    "type": "boolean"
                                                                                }
                                                                            },
                                                                            "required": [
                                                                                "isSpectator",
                                                                                "isBot"
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "null"
                                                        }
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "userId",
                                                "username",
                                                "displayName",
                                                "clanId",
                                                "partyId",
                                                "scopes",
                                                "status",
                                                "battleStatus"
                                            ]
                                        }
                                    }
                                }
                            },
                            {
                                "type": "object",
                                "properties": {
                                    "title": {
                                        "type": "string"
                                    },
                                    "locked": {
                                        "type": "boolean"
                                    },
                                    "passworded": {
                                        "type": "boolean"
                                    },
                                    "bossIds": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    },
                                    "joinQueueIds": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    },
                                    "limits": {
                                        "type": "object",
                                        "properties": {
                                            "minTeamsize": {
                                                "anyOf": [
                                                    {
                                                        "type": "integer"
                                                    },
                                                    {
                                                        "type": "null"
                                                    }
                                                ]
                                            },
                                            "maxTeamsize": {
                                                "anyOf": [
                                                    {
                                                        "type": "integer"
                                                    },
                                                    {
                                                        "type": "null"
                                                    }
                                                ]
                                            },
                                            "minRating": {
                                                "anyOf": [
                                                    {
                                                        "type": "integer"
                                                    },
                                                    {
                                                        "type": "null"
                                                    }
                                                ]
                                            },
                                            "maxRating": {
                                                "anyOf": [
                                                    {
                                                        "type": "integer"
                                                    },
                                                    {
                                                        "type": "null"
                                                    }
                                                ]
                                            }
                                        },
                                        "required": [
                                            "minTeamsize",
                                            "maxTeamsize",
                                            "minRating",
                                            "maxRating"
                                        ]
                                    }
                                }
                            }
                        ]
                    }
                }
            },
            "required": [
                "battles"
            ]
        }
    },
    "required": [
        "type",
        "messageId",
        "commandId",
        "data"
    ]
}
```

</details>

<details>
<summary>Example</summary>

```json
{
    "type": "event",
    "messageId": "in nostrud",
    "commandId": "lobby/updated",
    "data": {
        "battles": [
            {
                "title": "3v3 | Newbies only",
                "limits": {
                    "minTeamsize": 3,
                    "maxTeamsize": 3,
                    "minRating": null,
                    "maxRating": 25
                }
            },
            {
                "title": "3v3 | Newbies only",
                "limits": {
                    "minTeamsize": 3,
                    "maxTeamsize": 3,
                    "minRating": null,
                    "maxRating": 25
                }
            }
        ]
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface LobbyUpdatedEvent {
    type: "event";
    messageId: string;
    commandId: "lobby/updated";
    data: {
        battles: ({
            battleId?: string;
            hostId?: string;
            engine?: string;
            game?: string;
            map?: string;
            startPosType?: 0 | 1 | 2;
            startAreas?: {
                [k: string]: {
                    x: number;
                    y: number;
                    width: number;
                    height: number;
                };
            };
            startTime?: number | null;
            ip?: string | null;
            port?: number | null;
            scriptPassword?: string | null;
            modOptions?: {
                [k: string]: unknown;
            };
            bots?: {
                playerId: number;
                teamId: number;
                color: string;
                bonus: number;
                inGame: boolean;
                isSpectator: false;
                isBot: true;
                ownerId: string;
                aiShortName: string;
                name: string;
                aiOptions: {
                    [k: string]: unknown;
                };
                faction: string;
            }[];
            users?: {
                userId: string;
                username: string;
                displayName: string;
                clanId: string | null;
                partyId: string | null;
                scopes: string[];
                countryCode?: string;
                status: "offline" | "menu" | "playing" | "lobby";
                battleStatus:
                    | ({
                          battleId: string;
                      } & (
                          | ({
                                playerId: number;
                                teamId: number;
                                color: string;
                                bonus: number;
                                inGame: boolean;
                            } & {
                                isSpectator: false;
                                isBot: false;
                                ready: boolean;
                                sync: {
                                    engine: number;
                                    game: number;
                                    map: number;
                                };
                            })
                          | {
                                isSpectator: true;
                                isBot: false;
                            }
                      ))
                    | null;
            }[];
        } & {
            title?: string;
            locked?: boolean;
            passworded?: boolean;
            bossIds?: string[];
            joinQueueIds?: string[];
            limits?: {
                minTeamsize: number | null;
                maxTeamsize: number | null;
                minRating: number | null;
                maxRating: number | null;
            };
        })[];
    };
}

```
