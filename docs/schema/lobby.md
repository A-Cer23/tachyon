<!-- THIS FILE IS AUTOMATICALLY GENERATED, PLEASE DO NOT EDIT IT MANUALLY -->

# Lobby

These commands relate to custom battles.

---
- [close](#close)
- [create](#create)
- [join](#join)
- [joined](#joined)
- [leave](#leave)
- [left](#left)
- [list](#list)
- [receiveMessage](#receivemessage)
- [sendMessage](#sendmessage)
- [subscribe](#subscribe)
- [unsubscribe](#unsubscribe)
- [updated](#updated)
---

## Close

Close an existing lobby.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Requires Role: `tachyon.lobby`

### Request

JSONSchema

```json
{
    "$id": "lobby.close.request",
    "scopes": [
        "tachyon.lobby"
    ],
    "type": "object",
    "properties": {
        "type": {
            "const": "request",
            "type": "string"
        },
        "messageId": {
            "type": "string"
        },
        "commandId": {
            "const": "lobby/close",
            "type": "string"
        }
    },
    "required": [
        "type",
        "messageId",
        "commandId"
    ]
}
```
<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "Ut",
    "commandId": "lobby/close"
}
```
</details>

### Response

JSONSchema

```json
{
    "$id": "lobby.close.response",
    "scopes": [
        "tachyon.lobby"
    ],
    "anyOf": [
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/close",
                    "type": "string"
                },
                "status": {
                    "const": "success",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/close",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "internal_error",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/close",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "unauthorized",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/close",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "invalid_request",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/close",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "command_unimplemented",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        }
    ]
}
```
<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "dolore",
    "commandId": "lobby/close",
    "status": "success"
}
```
</details>

---

## Create

Create a new lobby - intended for player clients to summon a dedicated host.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Requires Role: `tachyon.lobby`

### Request

JSONSchema

```json
{
    "$id": "lobby.create.request",
    "scopes": [
        "tachyon.lobby"
    ],
    "type": "object",
    "properties": {
        "type": {
            "const": "request",
            "type": "string"
        },
        "messageId": {
            "type": "string"
        },
        "commandId": {
            "const": "lobby/create",
            "type": "string"
        },
        "data": {
            "examples": [
                {
                    "title": "8v8 | All Welcome",
                    "private": false,
                    "region": "EU",
                    "maxPlayers": 16
                }
            ],
            "type": "object",
            "properties": {
                "title": {
                    "minLength": 2,
                    "maxLength": 30,
                    "type": "string"
                },
                "private": {
                    "default": true,
                    "type": "boolean"
                },
                "region": {
                    "type": "string"
                },
                "maxPlayers": {
                    "minimum": 0,
                    "default": 16,
                    "type": "integer"
                }
            },
            "required": [
                "title",
                "private",
                "region",
                "maxPlayers"
            ]
        }
    },
    "required": [
        "type",
        "messageId",
        "commandId",
        "data"
    ]
}
```
<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "labore",
    "commandId": "lobby/create",
    "data": {
        "title": "8v8 | All Welcome",
        "private": false,
        "region": "EU",
        "maxPlayers": 16
    }
}
```
</details>

### Response

JSONSchema

```json
{
    "$id": "lobby.create.response",
    "scopes": [
        "tachyon.lobby"
    ],
    "anyOf": [
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/create",
                    "type": "string"
                },
                "status": {
                    "const": "success",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/create",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "no_hosts_available",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/create",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "invalid_region",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/create",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "internal_error",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/create",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "unauthorized",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/create",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "invalid_request",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/create",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "command_unimplemented",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        }
    ]
}
```
<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "incididunt",
    "commandId": "lobby/create",
    "status": "success"
}
```
</details>

---

## Join

Join a custom lobby. Server will send a [joined](#joined) response containing the joined lobby's data. 
These commands are split because the server may want to force the client to join a battle without them explicitly requesting it.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Requires Role: `tachyon.lobby`

### Request

JSONSchema

```json
{
    "$id": "lobby.join.request",
    "scopes": [
        "tachyon.lobby"
    ],
    "type": "object",
    "properties": {
        "type": {
            "const": "request",
            "type": "string"
        },
        "messageId": {
            "type": "string"
        },
        "commandId": {
            "const": "lobby/join",
            "type": "string"
        },
        "data": {
            "examples": [
                {
                    "lobbyId": 27,
                    "password": "fish"
                }
            ],
            "type": "object",
            "properties": {
                "lobbyId": {
                    "type": "string"
                },
                "password": {
                    "type": "string"
                }
            },
            "required": [
                "lobbyId"
            ]
        }
    },
    "required": [
        "type",
        "messageId",
        "commandId",
        "data"
    ]
}
```
<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "tempor",
    "commandId": "lobby/join",
    "data": {
        "lobbyId": 27,
        "password": "fish"
    }
}
```
</details>

### Response

JSONSchema

```json
{
    "$id": "lobby.join.response",
    "scopes": [
        "tachyon.lobby"
    ],
    "anyOf": [
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/join",
                    "type": "string"
                },
                "status": {
                    "const": "success",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/join",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "locked",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/join",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "requires_password",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/join",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "invalid_password",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/join",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "max_participants_reached",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/join",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "rank_too_low",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/join",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "rank_too_high",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/join",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "banned",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/join",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "internal_error",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/join",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "unauthorized",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/join",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "invalid_request",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/join",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "command_unimplemented",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        }
    ]
}
```
<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "eiusmod",
    "commandId": "lobby/join",
    "status": "success"
}
```
</details>

---

## Joined

Sent when the client successfully joins a lobby. Can also be sent at any time by the server to forcibly make the client join a lobby.

- Endpoint Type: **Event**
- Source: **Server**
- Target: **User**
- Requires Role: `tachyon.lobby`

### Event

JSONSchema

```json
{
    "$id": "lobby.joined.event",
    "scopes": [
        "tachyon.lobby"
    ],
    "type": "object",
    "properties": {
        "type": {
            "const": "event",
            "type": "string"
        },
        "messageId": {
            "type": "string"
        },
        "commandId": {
            "const": "lobby/joined",
            "type": "string"
        },
        "data": {
            "$ref": "battle"
        }
    },
    "required": [
        "type",
        "messageId",
        "commandId",
        "data"
    ]
}
```
<details>
<summary>Example</summary>

```json
{
    "type": "event",
    "messageId": "do",
    "commandId": "lobby/joined",
    "data": {
        "battleId": 27,
        "hostId": 822,
        "engine": "105.1.1-1821-gaca6f20 BAR105",
        "game": "Beyond All Reason test-23561-0abff7c",
        "map": "Red Comet Remake 1.8",
        "startPosType": 2,
        "startAreas": {
            "0": {
                "x": 0,
                "y": 0,
                "width": 1,
                "height": 0.3
            },
            "1": {
                "x": 0,
                "y": 0.7,
                "width": 1,
                "height": 0.3
            }
        },
        "startTime": 1705432698,
        "ip": "121.32.201.76",
        "port": 41403,
        "scriptPassword": "10sdfi90sid0sjkdf",
        "modOptions": {
            "emprework": 0
        },
        "bots": [],
        "users": []
    }
}
```
</details>

---

## Leave

Leave the current lobby.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Requires Role: `tachyon.lobby`

### Request

JSONSchema

```json
{
    "$id": "lobby.leave.request",
    "scopes": [
        "tachyon.lobby"
    ],
    "type": "object",
    "properties": {
        "type": {
            "const": "request",
            "type": "string"
        },
        "messageId": {
            "type": "string"
        },
        "commandId": {
            "const": "lobby/leave",
            "type": "string"
        }
    },
    "required": [
        "type",
        "messageId",
        "commandId"
    ]
}
```
<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "id",
    "commandId": "lobby/leave"
}
```
</details>

### Response

JSONSchema

```json
{
    "$id": "lobby.leave.response",
    "scopes": [
        "tachyon.lobby"
    ],
    "anyOf": [
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/leave",
                    "type": "string"
                },
                "status": {
                    "const": "success",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/leave",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "no_lobby",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/leave",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "internal_error",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/leave",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "unauthorized",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/leave",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "invalid_request",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/leave",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "command_unimplemented",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        }
    ]
}
```
<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "sint",
    "commandId": "lobby/leave",
    "status": "success"
}
```
</details>

---

## Left

Sent when the server removes the client from a lobby.

- Endpoint Type: **Event**
- Source: **Server**
- Target: **User**
- Requires Role: `tachyon.lobby`

### Event

JSONSchema

```json
{
    "$id": "lobby.left.event",
    "scopes": [
        "tachyon.lobby"
    ],
    "type": "object",
    "properties": {
        "type": {
            "const": "event",
            "type": "string"
        },
        "messageId": {
            "type": "string"
        },
        "commandId": {
            "const": "lobby/left",
            "type": "string"
        }
    },
    "required": [
        "type",
        "messageId",
        "commandId"
    ]
}
```
<details>
<summary>Example</summary>

```json
{
    "type": "event",
    "messageId": "nulla",
    "commandId": "lobby/left"
}
```
</details>

---

## List

Returns all custom lobbies.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Requires Role: `tachyon.lobby`

### Request

JSONSchema

```json
{
    "$id": "lobby.list.request",
    "scopes": [
        "tachyon.lobby"
    ],
    "type": "object",
    "properties": {
        "type": {
            "const": "request",
            "type": "string"
        },
        "messageId": {
            "type": "string"
        },
        "commandId": {
            "const": "lobby/list",
            "type": "string"
        }
    },
    "required": [
        "type",
        "messageId",
        "commandId"
    ]
}
```
<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "dolor",
    "commandId": "lobby/list"
}
```
</details>

### Response

JSONSchema

```json
{
    "$id": "lobby.list.response",
    "scopes": [
        "tachyon.lobby"
    ],
    "anyOf": [
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/list",
                    "type": "string"
                },
                "status": {
                    "const": "success",
                    "type": "string"
                },
                "data": {
                    "type": "object",
                    "properties": {
                        "battles": {
                            "type": "array",
                            "items": {
                                "$ref": "customBattle"
                            }
                        }
                    },
                    "required": [
                        "battles"
                    ]
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "data"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/list",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "internal_error",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/list",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "unauthorized",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/list",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "invalid_request",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/list",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "command_unimplemented",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        }
    ]
}
```
<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "aute",
    "commandId": "lobby/list",
    "status": "success",
    "data": {
        "battles": [
            {
                "battleId": 27,
                "hostId": 822,
                "engine": "105.1.1-1821-gaca6f20 BAR105",
                "game": "Beyond All Reason test-23561-0abff7c",
                "map": "Red Comet Remake 1.8",
                "startPosType": 2,
                "startAreas": {
                    "0": {
                        "x": 0,
                        "y": 0,
                        "width": 1,
                        "height": 0.3
                    },
                    "1": {
                        "x": 0,
                        "y": 0.7,
                        "width": 1,
                        "height": 0.3
                    }
                },
                "startTime": 1705432698,
                "ip": "121.32.201.76",
                "port": 41403,
                "scriptPassword": "10sdfi90sid0sjkdf",
                "modOptions": {
                    "emprework": 0
                },
                "bots": [],
                "users": [],
                "title": "8v8 | All Welcome",
                "bossIds": [
                    123,
                    456
                ],
                "locked": false,
                "passworded": false,
                "spectatorIds": [
                    88
                ],
                "limits": {
                    "minTeamsize": 3,
                    "maxTeamsize": 3,
                    "minRating": null,
                    "maxRating": 25
                }
            }
        ]
    }
}
```
</details>

---

## ReceiveMessage

Receive a lobby message. See [sendMessage](#sendmessage) for outgoing messages.

- Endpoint Type: **Event**
- Source: **Server**
- Target: **User**
- Requires Role: `tachyon.lobby`

### Event

JSONSchema

```json
{
    "$id": "lobby.receiveMessage.event",
    "scopes": [
        "tachyon.lobby"
    ],
    "type": "object",
    "properties": {
        "type": {
            "const": "event",
            "type": "string"
        },
        "messageId": {
            "type": "string"
        },
        "commandId": {
            "const": "lobby/receiveMessage",
            "type": "string"
        },
        "data": {
            "examples": [
                {
                    "userId": 27,
                    "message": "Hello lobby!"
                }
            ],
            "type": "object",
            "properties": {
                "userId": {
                    "type": "string"
                },
                "message": {
                    "type": "string"
                }
            },
            "required": [
                "userId",
                "message"
            ]
        }
    },
    "required": [
        "type",
        "messageId",
        "commandId",
        "data"
    ]
}
```
<details>
<summary>Example</summary>

```json
{
    "type": "event",
    "messageId": "nisi",
    "commandId": "lobby/receiveMessage",
    "data": {
        "userId": 27,
        "message": "Hello lobby!"
    }
}
```
</details>

---

## SendMessage

Send a lobby message. See [receiveMessage](#receivemessage) for incoming messages.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Requires Role: `tachyon.lobby`

### Request

JSONSchema

```json
{
    "$id": "lobby.sendMessage.request",
    "scopes": [
        "tachyon.lobby"
    ],
    "type": "object",
    "properties": {
        "type": {
            "const": "request",
            "type": "string"
        },
        "messageId": {
            "type": "string"
        },
        "commandId": {
            "const": "lobby/sendMessage",
            "type": "string"
        },
        "data": {
            "examples": [
                {
                    "message": "Hello lobby!"
                }
            ],
            "type": "object",
            "properties": {
                "message": {
                    "maxLength": 300,
                    "type": "string"
                }
            },
            "required": [
                "message"
            ]
        }
    },
    "required": [
        "type",
        "messageId",
        "commandId",
        "data"
    ]
}
```
<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "ullamco",
    "commandId": "lobby/sendMessage",
    "data": {
        "message": "Hello lobby!"
    }
}
```
</details>

### Response

JSONSchema

```json
{
    "$id": "lobby.sendMessage.response",
    "scopes": [
        "tachyon.lobby"
    ],
    "anyOf": [
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/sendMessage",
                    "type": "string"
                },
                "status": {
                    "const": "success",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/sendMessage",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "not_in_lobby",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/sendMessage",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "muted",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/sendMessage",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "internal_error",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/sendMessage",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "unauthorized",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/sendMessage",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "invalid_request",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/sendMessage",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "command_unimplemented",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        }
    ]
}
```
<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "exercitation",
    "commandId": "lobby/sendMessage",
    "status": "success"
}
```
</details>

---

## Subscribe

Subscribe to custom battle updates. By default, updates for the user's own battle will always be subscribed to. If successful, the Tachyon server should respond with full data about the subscribed battles, and then continue to send partial (stateful) updates via the [updated](#updated) response.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Requires Role: `tachyon.lobby`

### Request

JSONSchema

```json
{
    "$id": "lobby.subscribe.request",
    "scopes": [
        "tachyon.lobby"
    ],
    "type": "object",
    "properties": {
        "type": {
            "const": "request",
            "type": "string"
        },
        "messageId": {
            "type": "string"
        },
        "commandId": {
            "const": "lobby/subscribe",
            "type": "string"
        },
        "data": {
            "type": "object",
            "properties": {
                "battleIds": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            },
            "required": [
                "battleIds"
            ]
        }
    },
    "required": [
        "type",
        "messageId",
        "commandId",
        "data"
    ]
}
```
<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "Ut velit",
    "commandId": "lobby/subscribe",
    "data": {
        "battleIds": [
            "Ut velit",
            "Ut velit"
        ]
    }
}
```
</details>

### Response

JSONSchema

```json
{
    "$id": "lobby.subscribe.response",
    "scopes": [
        "tachyon.lobby"
    ],
    "anyOf": [
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/subscribe",
                    "type": "string"
                },
                "status": {
                    "const": "success",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/subscribe",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "internal_error",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/subscribe",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "unauthorized",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/subscribe",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "invalid_request",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/subscribe",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "command_unimplemented",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        }
    ]
}
```
<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "Ut in",
    "commandId": "lobby/subscribe",
    "status": "success"
}
```
</details>

---

## Unsubscribe

Unsubscribe from custom battle updates. If battleIds is passed only updates to those battles will be stopped, otherwise this will stop updates for all battles.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Requires Role: `tachyon.lobby`

### Request

JSONSchema

```json
{
    "$id": "lobby.unsubscribe.request",
    "scopes": [
        "tachyon.lobby"
    ],
    "type": "object",
    "properties": {
        "type": {
            "const": "request",
            "type": "string"
        },
        "messageId": {
            "type": "string"
        },
        "commandId": {
            "const": "lobby/unsubscribe",
            "type": "string"
        },
        "data": {
            "type": "object",
            "properties": {
                "battleIds": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            }
        }
    },
    "required": [
        "type",
        "messageId",
        "commandId",
        "data"
    ]
}
```
<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "aliqua in",
    "commandId": "lobby/unsubscribe",
    "data": {
        "aliquac": -56000000
    }
}
```
</details>

### Response

JSONSchema

```json
{
    "$id": "lobby.unsubscribe.response",
    "scopes": [
        "tachyon.lobby"
    ],
    "anyOf": [
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/unsubscribe",
                    "type": "string"
                },
                "status": {
                    "const": "success",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/unsubscribe",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "cannot_unsub_own_battle",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/unsubscribe",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "internal_error",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/unsubscribe",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "unauthorized",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/unsubscribe",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "invalid_request",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "lobby/unsubscribe",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "command_unimplemented",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        }
    ]
}
```
<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "magna commodo",
    "commandId": "lobby/unsubscribe",
    "status": "success"
}
```
</details>

---

## Updated

Server sends an array of partial battle objects whenever a subscribed battle changes in some way.

- Endpoint Type: **Event**
- Source: **Server**
- Target: **User**
- Requires Role: `tachyon.lobby`

### Event

JSONSchema

```json
{
    "$id": "lobby.updated.event",
    "scopes": [
        "tachyon.lobby"
    ],
    "type": "object",
    "properties": {
        "type": {
            "const": "event",
            "type": "string"
        },
        "messageId": {
            "type": "string"
        },
        "commandId": {
            "const": "lobby/updated",
            "type": "string"
        },
        "data": {
            "type": "object",
            "properties": {
                "battles": {
                    "type": "array",
                    "items": {
                        "$ref": "customBattle",
                        "type": "object",
                        "properties": {},
                        "examples": [
                            {
                                "title": "3v3 | Newbies only",
                                "limits": {
                                    "minTeamsize": 3,
                                    "maxTeamsize": 3,
                                    "minRating": null,
                                    "maxRating": 25
                                }
                            }
                        ]
                    }
                }
            },
            "required": [
                "battles"
            ]
        }
    },
    "required": [
        "type",
        "messageId",
        "commandId",
        "data"
    ]
}
```
<details>
<summary>Example</summary>

```json
{
    "type": "event",
    "messageId": "id ea",
    "commandId": "lobby/updated",
    "data": {
        "battles": [
            {
                "title": "3v3 | Newbies only",
                "limits": {
                    "minTeamsize": 3,
                    "maxTeamsize": 3,
                    "minRating": null,
                    "maxRating": 25
                }
            },
            {
                "title": "3v3 | Newbies only",
                "limits": {
                    "minTeamsize": 3,
                    "maxTeamsize": 3,
                    "minRating": null,
                    "maxRating": 25
                }
            }
        ]
    }
}
```
</details>

