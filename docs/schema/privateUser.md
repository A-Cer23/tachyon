<!-- THIS FILE IS AUTOMATICALLY GENERATED, PLEASE DO NOT EDIT IT MANUALLY -->

# PrivateUser

- [add](#add)
- [update](#update)
---

## Add

Contains the full state of client's own user. This event should always precede [update](#update) events which contain partial updates of how the user has changed.

- Endpoint Type: **Event**
- Source: **Server**
- Target: **User**
- Required Scopes: `tachyon.lobby`

### Event

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "PrivateUserAddEvent",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "event" },
        "messageId": { "type": "string" },
        "commandId": { "const": "privateUser/add" },
        "data": {
            "title": "PrivateUserAddEventData",
            "type": "object",
            "properties": {
                "user": { "$ref": "../../definitions/privateUser.json" }
            },
            "required": ["user"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

#### TypeScript Definition
```ts
export type PrivateUser = User & {
    friendIds: string[];
    outgoingFriendRequestIds: string[];
    incomingFriendRequestIds: string[];
    ignoreIds: string[];
};
export type UserId = string;
export type BattleStatus =
    | ({
          battleId: string;
      } & ({
          isSpectator: boolean;
      } & Player))
    | null;

export interface PrivateUserAddEvent {
    type: "event";
    messageId: string;
    commandId: "privateUser/add";
    data: PrivateUserAddEventData;
}
export interface PrivateUserAddEventData {
    user: PrivateUser;
}
export interface User {
    userId: UserId;
    username: string;
    displayName: string;
    clanId: string | null;
    partyId: string | null;
    scopes: string[];
    countryCode?: string;
    status: "offline" | "menu" | "playing" | "lobby";
    battleStatus: BattleStatus;
}
export interface Player {
    userId: UserId;
    name: string;
    password: string;
    rank?: number;
    countryCode?: string;
    customProperties?: CustomStartScriptProperties;
}
export interface CustomStartScriptProperties {
    [k: string]: string;
}
```
---

## Update

Sent by the server to inform the client when its own user get updated in some way. The user object is partial, meaning only the elements present have changed, and anything missing is assumed to be unchanged. This event should precede the [add](#add) event which contains the full, initial state of the user.

- Endpoint Type: **Event**
- Source: **Server**
- Target: **User**
- Required Scopes: `tachyon.lobby`

### Event

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "PrivateUserUpdateEvent",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "event" },
        "messageId": { "type": "string" },
        "commandId": { "const": "privateUser/update" },
        "data": {
            "title": "PrivateUserUpdateEventData",
            "type": "object",
            "properties": {
                "user": {
                    "type": "object",
                    "allOf": [
                        { "type": "object", "properties": {} },
                        {
                            "type": "object",
                            "properties": {
                                "friendIds": {
                                    "type": "array",
                                    "items": { "type": "string" }
                                },
                                "outgoingFriendRequestIds": {
                                    "type": "array",
                                    "items": { "type": "string" }
                                },
                                "incomingFriendRequestIds": {
                                    "type": "array",
                                    "items": { "type": "string" }
                                },
                                "ignoreIds": {
                                    "type": "array",
                                    "items": { "type": "string" }
                                }
                            }
                        }
                    ]
                }
            },
            "required": ["user"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

#### TypeScript Definition
```ts
export interface PrivateUserUpdateEvent {
    type: "event";
    messageId: string;
    commandId: "privateUser/update";
    data: PrivateUserUpdateEventData;
}
export interface PrivateUserUpdateEventData {
    user: {} & {
        friendIds?: string[];
        outgoingFriendRequestIds?: string[];
        incomingFriendRequestIds?: string[];
        ignoreIds?: string[];
    };
}
```
