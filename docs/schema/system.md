<!-- THIS FILE IS AUTOMATICALLY GENERATED, PLEASE DO NOT EDIT IT MANUALLY -->

# System

- [connected](#connected)
- [disconnect](#disconnect)
- [serverStats](#serverstats)
---

## Connected

Sent immediately by the server on connection.

- Endpoint Type: **Event**
- Source: **Server**
- Target: **User**
- Requires Role: `tachyon.lobby`

### Event

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "system/connected/event",
    "scopes": [
        "tachyon.lobby"
    ],
    "type": "object",
    "properties": {
        "type": {
            "const": "event",
            "type": "string"
        },
        "messageId": {
            "type": "string"
        },
        "commandId": {
            "const": "system/connected",
            "type": "string"
        },
        "data": {
            "type": "object",
            "properties": {
                "userId": {
                    "type": "string"
                },
                "username": {
                    "type": "string"
                },
                "displayName": {
                    "type": "string"
                },
                "avatarUrl": {
                    "anyOf": [
                        {
                            "type": "string"
                        },
                        {
                            "type": "null"
                        }
                    ]
                },
                "clanId": {
                    "anyOf": [
                        {
                            "type": "string"
                        },
                        {
                            "type": "null"
                        }
                    ]
                },
                "partyId": {
                    "anyOf": [
                        {
                            "type": "string"
                        },
                        {
                            "type": "null"
                        }
                    ]
                },
                "scopes": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "countryCode": {
                    "type": "string"
                },
                "status": {
                    "anyOf": [
                        {
                            "const": "offline",
                            "type": "string"
                        },
                        {
                            "const": "menu",
                            "type": "string"
                        },
                        {
                            "const": "playing",
                            "type": "string"
                        },
                        {
                            "const": "lobby",
                            "type": "string"
                        }
                    ]
                },
                "battleStatus": {
                    "anyOf": [
                        {
                            "allOf": [
                                {
                                    "type": "object",
                                    "properties": {
                                        "battleId": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "battleId"
                                    ]
                                },
                                {
                                    "anyOf": [
                                        {
                                            "type": "object",
                                            "allOf": [
                                                {
                                                    "type": "object",
                                                    "properties": {
                                                        "playerId": {
                                                            "type": "integer"
                                                        },
                                                        "teamId": {
                                                            "type": "integer"
                                                        },
                                                        "color": {
                                                            "type": "string"
                                                        },
                                                        "bonus": {
                                                            "type": "number"
                                                        },
                                                        "inGame": {
                                                            "type": "boolean"
                                                        }
                                                    },
                                                    "required": [
                                                        "playerId",
                                                        "teamId",
                                                        "color",
                                                        "bonus",
                                                        "inGame"
                                                    ]
                                                },
                                                {
                                                    "type": "object",
                                                    "properties": {
                                                        "isSpectator": {
                                                            "const": false,
                                                            "type": "boolean"
                                                        },
                                                        "isBot": {
                                                            "const": false,
                                                            "type": "boolean"
                                                        },
                                                        "ready": {
                                                            "type": "boolean"
                                                        },
                                                        "sync": {
                                                            "type": "object",
                                                            "properties": {
                                                                "engine": {
                                                                    "type": "number"
                                                                },
                                                                "game": {
                                                                    "type": "number"
                                                                },
                                                                "map": {
                                                                    "type": "number"
                                                                }
                                                            },
                                                            "required": [
                                                                "engine",
                                                                "game",
                                                                "map"
                                                            ]
                                                        }
                                                    },
                                                    "required": [
                                                        "isSpectator",
                                                        "isBot",
                                                        "ready",
                                                        "sync"
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "isSpectator": {
                                                    "const": true,
                                                    "type": "boolean"
                                                },
                                                "isBot": {
                                                    "const": false,
                                                    "type": "boolean"
                                                }
                                            },
                                            "required": [
                                                "isSpectator",
                                                "isBot"
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "null"
                        }
                    ]
                },
                "friendIds": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "outgoingFriendRequestIds": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "incomingFriendRequestIds": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "ignoreIds": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            },
            "required": [
                "userId",
                "username",
                "displayName",
                "avatarUrl",
                "clanId",
                "partyId",
                "scopes",
                "status",
                "battleStatus",
                "friendIds",
                "outgoingFriendRequestIds",
                "incomingFriendRequestIds",
                "ignoreIds"
            ]
        }
    },
    "required": [
        "type",
        "messageId",
        "commandId",
        "data"
    ]
}
```

</details>

<details>
<summary>Example</summary>

```json
{
    "type": "event",
    "messageId": "esse Lorem anim",
    "commandId": "system/connected",
    "data": {
        "userId": "esse Lorem anim",
        "username": "esse Lorem anim",
        "displayName": "esse Lorem anim",
        "avatarUrl": "esse Lorem anim",
        "clanId": "esse Lorem anim",
        "partyId": "esse Lorem anim",
        "scopes": [
            "esse Lorem anim",
            "esse Lorem anim",
            "esse Lorem anim"
        ],
        "countryCode": "esse Lorem anim",
        "status": "menu",
        "battleStatus": {
            "battleId": "esse Lorem anim",
            "playerId": -12000000,
            "teamId": -12000000,
            "color": "esse Lorem anim",
            "bonus": -11999999.999999955,
            "inGame": false,
            "isSpectator": false,
            "isBot": false,
            "ready": false,
            "sync": {
                "engine": -11999999.999999955,
                "game": -11999999.999999955,
                "map": -11999999.999999955
            }
        },
        "friendIds": [
            "esse Lorem anim",
            "esse Lorem anim",
            "esse Lorem anim"
        ],
        "outgoingFriendRequestIds": [
            "esse Lorem anim",
            "esse Lorem anim",
            "esse Lorem anim"
        ],
        "incomingFriendRequestIds": [
            "esse Lorem anim",
            "esse Lorem anim",
            "esse Lorem anim"
        ],
        "ignoreIds": [
            "esse Lorem anim",
            "esse Lorem anim",
            "esse Lorem anim"
        ]
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface SystemConnectedEvent {
    type: "event";
    messageId: string;
    commandId: "system/connected";
    data: {
        userId: string;
        username: string;
        displayName: string;
        avatarUrl: string | null;
        clanId: string | null;
        partyId: string | null;
        scopes: string[];
        countryCode?: string;
        status: "offline" | "menu" | "playing" | "lobby";
        battleStatus:
            | ({
                  battleId: string;
              } & (
                  | ({
                        playerId: number;
                        teamId: number;
                        color: string;
                        bonus: number;
                        inGame: boolean;
                    } & {
                        isSpectator: false;
                        isBot: false;
                        ready: boolean;
                        sync: {
                            engine: number;
                            game: number;
                            map: number;
                        };
                    })
                  | {
                        isSpectator: true;
                        isBot: false;
                    }
              ))
            | null;
        friendIds: string[];
        outgoingFriendRequestIds: string[];
        incomingFriendRequestIds: string[];
        ignoreIds: string[];
    };
}

```
---

## Disconnect

Ask the server to terminate the connection.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Requires Role: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "system/disconnect/request",
    "scopes": [
        "tachyon.lobby"
    ],
    "type": "object",
    "properties": {
        "type": {
            "const": "request",
            "type": "string"
        },
        "messageId": {
            "type": "string"
        },
        "commandId": {
            "const": "system/disconnect",
            "type": "string"
        },
        "data": {
            "type": "object",
            "properties": {
                "reason": {
                    "type": "string"
                }
            },
            "required": [
                "reason"
            ]
        }
    },
    "required": [
        "type",
        "messageId",
        "commandId"
    ]
}
```

</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "aute Lorem officia",
    "commandId": "system/disconnect",
    "data": {
        "reason": "aute Lorem officia"
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface SystemDisconnectRequest {
    type: "request";
    messageId: string;
    commandId: "system/disconnect";
    data?: {
        reason: string;
    };
}

```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "system/disconnect/response",
    "scopes": [
        "tachyon.lobby"
    ],
    "anyOf": [
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "system/disconnect",
                    "type": "string"
                },
                "status": {
                    "const": "success",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "system/disconnect",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "internal_error",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "system/disconnect",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "unauthorized",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "system/disconnect",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "invalid_request",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "system/disconnect",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "command_unimplemented",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        }
    ]
}
```

</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "Duis Lorem culpa",
    "commandId": "system/disconnect",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface SystemDisconnectResponse {
    type: "response";
    messageId: string;
    commandId: "system/disconnect";
    status: "success";
}

```
---

## ServerStats

Get server stats such as user count.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Requires Role: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "system/serverStats/request",
    "scopes": [
        "tachyon.lobby"
    ],
    "type": "object",
    "properties": {
        "type": {
            "const": "request",
            "type": "string"
        },
        "messageId": {
            "type": "string"
        },
        "commandId": {
            "const": "system/serverStats",
            "type": "string"
        }
    },
    "required": [
        "type",
        "messageId",
        "commandId"
    ]
}
```

</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "Duis Lorem sint",
    "commandId": "system/serverStats"
}
```
</details>

#### TypeScript Definition
```ts
export interface SystemServerStatsRequest {
    type: "request";
    messageId: string;
    commandId: "system/serverStats";
}

```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "system/serverStats/response",
    "scopes": [
        "tachyon.lobby"
    ],
    "anyOf": [
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "system/serverStats",
                    "type": "string"
                },
                "status": {
                    "const": "success",
                    "type": "string"
                },
                "data": {
                    "type": "object",
                    "properties": {
                        "userCount": {
                            "type": "integer"
                        }
                    },
                    "required": [
                        "userCount"
                    ]
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "data"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "system/serverStats",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "internal_error",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "system/serverStats",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "unauthorized",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "system/serverStats",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "invalid_request",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "system/serverStats",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "command_unimplemented",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        }
    ]
}
```

</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "laborum Lorem fugiat",
    "commandId": "system/serverStats",
    "status": "success",
    "data": {
        "userCount": -4000000
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface SystemServerStatsResponse {
    type: "response";
    messageId: string;
    commandId: "system/serverStats";
    status: "success";
    data: {
        userCount: number;
    };
}

```
