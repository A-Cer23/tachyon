<!-- THIS FILE IS AUTOMATICALLY GENERATED, PLEASE DO NOT EDIT IT MANUALLY -->

# User

- [updated](#updated)
---

## Updated

Sent by the server to inform the client when subscribed users get updated in some way. The root object of each array element in `users` are partial, meaning only the elements present have changed, and anything missing is assumed to be unchanged. This event should be sent to a user when they login to inform them about their own user data.

- Endpoint Type: **Event**
- Source: **Server**
- Target: **User**
- Requires Role: `tachyon.lobby`

### Event

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "user.updated.event",
    "scopes": [
        "tachyon.lobby"
    ],
    "type": "object",
    "properties": {
        "type": {
            "const": "event",
            "type": "string"
        },
        "messageId": {
            "type": "string"
        },
        "commandId": {
            "const": "user/updated",
            "type": "string"
        },
        "data": {
            "type": "object",
            "properties": {
                "users": {
                    "type": "array",
                    "items": {
                        "$ref": "privateUser"
                    }
                }
            },
            "required": [
                "users"
            ]
        }
    },
    "required": [
        "type",
        "messageId",
        "commandId",
        "data"
    ]
}
```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "event",
    "messageId": "esse Lorem anim",
    "commandId": "user/updated",
    "data": {
        "users": [
            {
                "userId": "esse Lorem anim",
                "username": "esse Lorem anim",
                "displayName": "esse Lorem anim",
                "clanId": "esse Lorem anim",
                "partyId": "esse Lorem anim",
                "scopes": [
                    "esse Lorem anim",
                    "esse Lorem anim",
                    "esse Lorem anim"
                ],
                "countryCode": "esse Lorem anim",
                "status": "menu",
                "battleStatus": {
                    "battleId": "esse Lorem anim"
                },
                "friendIds": [
                    "esse Lorem anim",
                    "esse Lorem anim",
                    "esse Lorem anim"
                ],
                "outgoingFriendRequestIds": [
                    "esse Lorem anim",
                    "esse Lorem anim",
                    "esse Lorem anim"
                ],
                "incomingFriendRequestIds": [
                    "esse Lorem anim",
                    "esse Lorem anim",
                    "esse Lorem anim"
                ],
                "ignoreIds": [
                    "esse Lorem anim",
                    "esse Lorem anim",
                    "esse Lorem anim"
                ]
            },
            {
                "userId": "esse Lorem anim",
                "username": "esse Lorem anim",
                "displayName": "esse Lorem anim",
                "clanId": "esse Lorem anim",
                "partyId": "esse Lorem anim",
                "scopes": [
                    "esse Lorem anim",
                    "esse Lorem anim",
                    "esse Lorem anim"
                ],
                "countryCode": "esse Lorem anim",
                "status": "menu",
                "battleStatus": {
                    "battleId": "esse Lorem anim"
                },
                "friendIds": [
                    "esse Lorem anim",
                    "esse Lorem anim",
                    "esse Lorem anim"
                ],
                "outgoingFriendRequestIds": [
                    "esse Lorem anim",
                    "esse Lorem anim",
                    "esse Lorem anim"
                ],
                "incomingFriendRequestIds": [
                    "esse Lorem anim",
                    "esse Lorem anim",
                    "esse Lorem anim"
                ],
                "ignoreIds": [
                    "esse Lorem anim",
                    "esse Lorem anim",
                    "esse Lorem anim"
                ]
            },
            {
                "userId": "esse Lorem anim",
                "username": "esse Lorem anim",
                "displayName": "esse Lorem anim",
                "clanId": "esse Lorem anim",
                "partyId": "esse Lorem anim",
                "scopes": [
                    "esse Lorem anim",
                    "esse Lorem anim",
                    "esse Lorem anim"
                ],
                "countryCode": "esse Lorem anim",
                "status": "menu",
                "battleStatus": {
                    "battleId": "esse Lorem anim"
                },
                "friendIds": [
                    "esse Lorem anim",
                    "esse Lorem anim",
                    "esse Lorem anim"
                ],
                "outgoingFriendRequestIds": [
                    "esse Lorem anim",
                    "esse Lorem anim",
                    "esse Lorem anim"
                ],
                "incomingFriendRequestIds": [
                    "esse Lorem anim",
                    "esse Lorem anim",
                    "esse Lorem anim"
                ],
                "ignoreIds": [
                    "esse Lorem anim",
                    "esse Lorem anim",
                    "esse Lorem anim"
                ]
            }
        ]
    }
}
```
</details>

#### TypeScript Definition
```ts
export type PrivateUser = User & {
    friendIds: string[];
    outgoingFriendRequestIds: string[];
    incomingFriendRequestIds: string[];
    ignoreIds: string[];
};
export type UserStatus = "offline" | "menu" | "playing" | "lobby";
export type BattleStatus =
    | ({
          battleId: string;
      } & (BattlePlayer | BattleSpectator))
    | null;
export type BattlePlayer = BattleContender & {
    isSpectator: false;
    isBot: false;
    ready: boolean;
    sync: {
        engine: number;
        game: number;
        map: number;
    };
};

export interface UserUpdatedEvent {
    type: "event";
    messageId: string;
    commandId: "user/updated";
    data: {
        users: PrivateUser[];
    };
}
export interface User {
    userId: string;
    username: string;
    displayName: string;
    clanId: string | null;
    partyId: string | null;
    scopes: string[];
    countryCode?: string;
    status: UserStatus;
    battleStatus: BattleStatus;
}
export interface BattleContender {
    playerId: number;
    teamId: number;
    color: string;
    bonus: number;
    inGame: boolean;
}
export interface BattleSpectator {
    isSpectator: true;
    isBot: false;
}
```
