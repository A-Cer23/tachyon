<!-- THIS FILE IS AUTOMATICALLY GENERATED, PLEASE DO NOT EDIT IT MANUALLY -->

# User

- [subscribe](#subscribe)
- [unsubscribe](#unsubscribe)
- [updated](#updated)
---

## Subscribe

Subscribe to user updates. By default, updates for the client's own user will always be subscribed to. If successful, the Tachyon server should respond with full data about the subscribed users, and then continue to send partial (stateful) updates via the [updated](#updated) response.

- Endpoint Type: **Request** -> **Response**
### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "user/subscribe/request",
    "roles": [],
    "type": "object",
    "properties": {
        "messageId": {
            "type": "string"
        },
        "commandId": {
            "const": "user/subscribe/request",
            "type": "string"
        },
        "data": {
            "type": "object",
            "properties": {
                "userIds": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            },
            "required": [
                "userIds"
            ]
        }
    },
    "required": [
        "messageId",
        "commandId",
        "data"
    ]
}
```

</details>

#### TypeScript Definition
```ts
export interface UserSubscribeRequest {
    messageId: string;
    commandId: "user/subscribe/request";
    data: {
        userIds: string[];
    };
}

```
#### Example
```json
{
    "messageId": "mollit",
    "commandId": "user/subscribe/request",
    "data": {
        "userIds": [
            "mollit"
        ]
    }
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "user/subscribe/response",
    "roles": [],
    "anyOf": [
        {
            "type": "object",
            "properties": {
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "user/subscribe/response",
                    "type": "string"
                },
                "status": {
                    "const": "success",
                    "type": "string"
                },
                "data": {
                    "type": "object",
                    "properties": {
                        "users": {
                            "type": "array",
                            "items": {
                                "type": "object",
                                "properties": {
                                    "userId": {
                                        "type": "string"
                                    },
                                    "username": {
                                        "type": "string"
                                    },
                                    "displayName": {
                                        "type": "string"
                                    },
                                    "avatarUrl": {
                                        "anyOf": [
                                            {
                                                "type": "string"
                                            },
                                            {
                                                "type": "null"
                                            }
                                        ]
                                    },
                                    "clanId": {
                                        "anyOf": [
                                            {
                                                "type": "string"
                                            },
                                            {
                                                "type": "null"
                                            }
                                        ]
                                    },
                                    "partyId": {
                                        "anyOf": [
                                            {
                                                "type": "string"
                                            },
                                            {
                                                "type": "null"
                                            }
                                        ]
                                    },
                                    "roles": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    },
                                    "countryCode": {
                                        "type": "string"
                                    },
                                    "status": {
                                        "anyOf": [
                                            {
                                                "const": "offline",
                                                "type": "string"
                                            },
                                            {
                                                "const": "menu",
                                                "type": "string"
                                            },
                                            {
                                                "const": "playing",
                                                "type": "string"
                                            },
                                            {
                                                "const": "lobby",
                                                "type": "string"
                                            }
                                        ]
                                    },
                                    "battleStatus": {
                                        "anyOf": [
                                            {
                                                "allOf": [
                                                    {
                                                        "type": "object",
                                                        "properties": {
                                                            "battleId": {
                                                                "type": "string"
                                                            }
                                                        },
                                                        "required": [
                                                            "battleId"
                                                        ]
                                                    },
                                                    {
                                                        "anyOf": [
                                                            {
                                                                "type": "object",
                                                                "allOf": [
                                                                    {
                                                                        "type": "object",
                                                                        "properties": {
                                                                            "playerId": {
                                                                                "type": "integer"
                                                                            },
                                                                            "teamId": {
                                                                                "type": "integer"
                                                                            },
                                                                            "color": {
                                                                                "type": "string"
                                                                            },
                                                                            "bonus": {
                                                                                "type": "number"
                                                                            },
                                                                            "inGame": {
                                                                                "type": "boolean"
                                                                            }
                                                                        },
                                                                        "required": [
                                                                            "playerId",
                                                                            "teamId",
                                                                            "color",
                                                                            "bonus",
                                                                            "inGame"
                                                                        ]
                                                                    },
                                                                    {
                                                                        "type": "object",
                                                                        "properties": {
                                                                            "isSpectator": {
                                                                                "const": false,
                                                                                "type": "boolean"
                                                                            },
                                                                            "isBot": {
                                                                                "const": false,
                                                                                "type": "boolean"
                                                                            },
                                                                            "ready": {
                                                                                "type": "boolean"
                                                                            },
                                                                            "sync": {
                                                                                "type": "object",
                                                                                "properties": {
                                                                                    "engine": {
                                                                                        "type": "number"
                                                                                    },
                                                                                    "game": {
                                                                                        "type": "number"
                                                                                    },
                                                                                    "map": {
                                                                                        "type": "number"
                                                                                    }
                                                                                },
                                                                                "required": [
                                                                                    "engine",
                                                                                    "game",
                                                                                    "map"
                                                                                ]
                                                                            }
                                                                        },
                                                                        "required": [
                                                                            "isSpectator",
                                                                            "isBot",
                                                                            "ready",
                                                                            "sync"
                                                                        ]
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "type": "object",
                                                                "properties": {
                                                                    "isSpectator": {
                                                                        "const": true,
                                                                        "type": "boolean"
                                                                    },
                                                                    "isBot": {
                                                                        "const": false,
                                                                        "type": "boolean"
                                                                    }
                                                                },
                                                                "required": [
                                                                    "isSpectator",
                                                                    "isBot"
                                                                ]
                                                            }
                                                        ]
                                                    }
                                                ]
                                            },
                                            {
                                                "type": "null"
                                            }
                                        ]
                                    }
                                },
                                "required": [
                                    "userId",
                                    "username",
                                    "displayName",
                                    "avatarUrl",
                                    "clanId",
                                    "partyId",
                                    "roles",
                                    "status",
                                    "battleStatus"
                                ]
                            }
                        }
                    },
                    "required": [
                        "users"
                    ]
                }
            },
            "required": [
                "messageId",
                "commandId",
                "status",
                "data"
            ]
        },
        {
            "type": "object",
            "properties": {
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "user/subscribe/response",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "internal_error",
                    "type": "string"
                }
            },
            "required": [
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "user/subscribe/response",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "unauthorized",
                    "type": "string"
                }
            },
            "required": [
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "user/subscribe/response",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "invalid_request",
                    "type": "string"
                }
            },
            "required": [
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "user/subscribe/response",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "command_unimplemented",
                    "type": "string"
                }
            },
            "required": [
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        }
    ]
}
```

</details>

#### TypeScript Definition
```ts
export type UserSubscribeResponse =
    | {
          messageId: string;
          commandId: "user/subscribe/response";
          status: "success";
          data: {
              users: {
                  userId: string;
                  username: string;
                  displayName: string;
                  avatarUrl: string | null;
                  clanId: string | null;
                  partyId: string | null;
                  roles: string[];
                  countryCode?: string;
                  status: "offline" | "menu" | "playing" | "lobby";
                  battleStatus:
                      | ({
                            battleId: string;
                        } & (
                            | ({
                                  playerId: number;
                                  teamId: number;
                                  color: string;
                                  bonus: number;
                                  inGame: boolean;
                              } & {
                                  isSpectator: false;
                                  isBot: false;
                                  ready: boolean;
                                  sync: {
                                      engine: number;
                                      game: number;
                                      map: number;
                                  };
                              })
                            | {
                                  isSpectator: true;
                                  isBot: false;
                              }
                        ))
                      | null;
              }[];
          };
      }
    | {
          messageId: string;
          commandId: "user/subscribe/response";
          status: "failed";
          reason: "internal_error";
      }
    | {
          messageId: string;
          commandId: "user/subscribe/response";
          status: "failed";
          reason: "unauthorized";
      }
    | {
          messageId: string;
          commandId: "user/subscribe/response";
          status: "failed";
          reason: "invalid_request";
      }
    | {
          messageId: string;
          commandId: "user/subscribe/response";
          status: "failed";
          reason: "command_unimplemented";
      };

```
#### Example
```json
{
    "messageId": "mollit",
    "commandId": "user/subscribe/response",
    "status": "success",
    "data": {
        "users": [
            {
                "userId": "mollit",
                "username": "mollit",
                "displayName": "mollit",
                "avatarUrl": "mollit",
                "clanId": "mollit",
                "partyId": "mollit",
                "roles": [
                    "mollit"
                ],
                "countryCode": "mollit",
                "status": "offline",
                "battleStatus": {
                    "battleId": "mollit",
                    "playerId": -75320000,
                    "teamId": -75320000,
                    "color": "mollit",
                    "bonus": -75320000,
                    "inGame": false,
                    "isSpectator": false,
                    "isBot": false,
                    "ready": false,
                    "sync": {
                        "engine": -75320000,
                        "game": -75320000,
                        "map": -75320000
                    }
                }
            }
        ]
    }
}
```
---

## Unsubscribe

Unsubscribe from user updates.

- Endpoint Type: **Request** -> **Response**
### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "user/unsubscribe/request",
    "roles": [],
    "type": "object",
    "properties": {
        "messageId": {
            "type": "string"
        },
        "commandId": {
            "const": "user/unsubscribe/request",
            "type": "string"
        },
        "data": {
            "type": "object",
            "properties": {
                "userIds": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            },
            "required": [
                "userIds"
            ]
        }
    },
    "required": [
        "messageId",
        "commandId",
        "data"
    ]
}
```

</details>

#### TypeScript Definition
```ts
export interface UserUnsubscribeRequest {
    messageId: string;
    commandId: "user/unsubscribe/request";
    data: {
        userIds: string[];
    };
}

```
#### Example
```json
{
    "messageId": "mollit",
    "commandId": "user/unsubscribe/request",
    "data": {
        "userIds": [
            "mollit"
        ]
    }
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "user/unsubscribe/response",
    "roles": [],
    "anyOf": [
        {
            "type": "object",
            "properties": {
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "user/unsubscribe/response",
                    "type": "string"
                },
                "status": {
                    "const": "success",
                    "type": "string"
                }
            },
            "required": [
                "messageId",
                "commandId",
                "status"
            ]
        },
        {
            "type": "object",
            "properties": {
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "user/unsubscribe/response",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "cannot_unsub_own_user",
                    "type": "string"
                }
            },
            "required": [
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "user/unsubscribe/response",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "internal_error",
                    "type": "string"
                }
            },
            "required": [
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "user/unsubscribe/response",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "unauthorized",
                    "type": "string"
                }
            },
            "required": [
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "user/unsubscribe/response",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "invalid_request",
                    "type": "string"
                }
            },
            "required": [
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "user/unsubscribe/response",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "command_unimplemented",
                    "type": "string"
                }
            },
            "required": [
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        }
    ]
}
```

</details>

#### TypeScript Definition
```ts
export type UserUnsubscribeResponse =
    | {
          messageId: string;
          commandId: "user/unsubscribe/response";
          status: "success";
      }
    | {
          messageId: string;
          commandId: "user/unsubscribe/response";
          status: "failed";
          reason: "cannot_unsub_own_user";
      }
    | {
          messageId: string;
          commandId: "user/unsubscribe/response";
          status: "failed";
          reason: "internal_error";
      }
    | {
          messageId: string;
          commandId: "user/unsubscribe/response";
          status: "failed";
          reason: "unauthorized";
      }
    | {
          messageId: string;
          commandId: "user/unsubscribe/response";
          status: "failed";
          reason: "invalid_request";
      }
    | {
          messageId: string;
          commandId: "user/unsubscribe/response";
          status: "failed";
          reason: "command_unimplemented";
      };

```
#### Example
```json
{
    "messageId": "mollit",
    "commandId": "user/unsubscribe/response",
    "status": "success"
}
```
---

## Updated

Sent by the server to inform the client when subscribed users get updated in some way. The root object of each array element in `users` are partial, meaning only the elements present have changed, and anything missing is assumed to be unchanged.

- Endpoint Type: **Response** only
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "user/updated/response",
    "roles": [],
    "anyOf": [
        {
            "type": "object",
            "properties": {
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "user/updated/response",
                    "type": "string"
                },
                "status": {
                    "const": "success",
                    "type": "string"
                },
                "data": {
                    "type": "object",
                    "properties": {
                        "users": {
                            "type": "array",
                            "items": {
                                "type": "object",
                                "properties": {
                                    "userId": {
                                        "type": "string"
                                    },
                                    "username": {
                                        "type": "string"
                                    },
                                    "displayName": {
                                        "type": "string"
                                    },
                                    "avatarUrl": {
                                        "anyOf": [
                                            {
                                                "type": "string"
                                            },
                                            {
                                                "type": "null"
                                            }
                                        ]
                                    },
                                    "clanId": {
                                        "anyOf": [
                                            {
                                                "type": "string"
                                            },
                                            {
                                                "type": "null"
                                            }
                                        ]
                                    },
                                    "partyId": {
                                        "anyOf": [
                                            {
                                                "type": "string"
                                            },
                                            {
                                                "type": "null"
                                            }
                                        ]
                                    },
                                    "roles": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    },
                                    "countryCode": {
                                        "type": "string"
                                    },
                                    "status": {
                                        "anyOf": [
                                            {
                                                "const": "offline",
                                                "type": "string"
                                            },
                                            {
                                                "const": "menu",
                                                "type": "string"
                                            },
                                            {
                                                "const": "playing",
                                                "type": "string"
                                            },
                                            {
                                                "const": "lobby",
                                                "type": "string"
                                            }
                                        ]
                                    },
                                    "battleStatus": {
                                        "anyOf": [
                                            {
                                                "allOf": [
                                                    {
                                                        "type": "object",
                                                        "properties": {
                                                            "battleId": {
                                                                "type": "string"
                                                            }
                                                        },
                                                        "required": [
                                                            "battleId"
                                                        ]
                                                    },
                                                    {
                                                        "anyOf": [
                                                            {
                                                                "type": "object",
                                                                "allOf": [
                                                                    {
                                                                        "type": "object",
                                                                        "properties": {
                                                                            "playerId": {
                                                                                "type": "integer"
                                                                            },
                                                                            "teamId": {
                                                                                "type": "integer"
                                                                            },
                                                                            "color": {
                                                                                "type": "string"
                                                                            },
                                                                            "bonus": {
                                                                                "type": "number"
                                                                            },
                                                                            "inGame": {
                                                                                "type": "boolean"
                                                                            }
                                                                        },
                                                                        "required": [
                                                                            "playerId",
                                                                            "teamId",
                                                                            "color",
                                                                            "bonus",
                                                                            "inGame"
                                                                        ]
                                                                    },
                                                                    {
                                                                        "type": "object",
                                                                        "properties": {
                                                                            "isSpectator": {
                                                                                "const": false,
                                                                                "type": "boolean"
                                                                            },
                                                                            "isBot": {
                                                                                "const": false,
                                                                                "type": "boolean"
                                                                            },
                                                                            "ready": {
                                                                                "type": "boolean"
                                                                            },
                                                                            "sync": {
                                                                                "type": "object",
                                                                                "properties": {
                                                                                    "engine": {
                                                                                        "type": "number"
                                                                                    },
                                                                                    "game": {
                                                                                        "type": "number"
                                                                                    },
                                                                                    "map": {
                                                                                        "type": "number"
                                                                                    }
                                                                                },
                                                                                "required": [
                                                                                    "engine",
                                                                                    "game",
                                                                                    "map"
                                                                                ]
                                                                            }
                                                                        },
                                                                        "required": [
                                                                            "isSpectator",
                                                                            "isBot",
                                                                            "ready",
                                                                            "sync"
                                                                        ]
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "type": "object",
                                                                "properties": {
                                                                    "isSpectator": {
                                                                        "const": true,
                                                                        "type": "boolean"
                                                                    },
                                                                    "isBot": {
                                                                        "const": false,
                                                                        "type": "boolean"
                                                                    }
                                                                },
                                                                "required": [
                                                                    "isSpectator",
                                                                    "isBot"
                                                                ]
                                                            }
                                                        ]
                                                    }
                                                ]
                                            },
                                            {
                                                "type": "null"
                                            }
                                        ]
                                    },
                                    "friendIds": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    },
                                    "outgoingFriendRequestIds": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    },
                                    "incomingFriendRequestIds": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    },
                                    "ignoreIds": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "required": [
                        "users"
                    ]
                }
            },
            "required": [
                "messageId",
                "commandId",
                "status",
                "data"
            ]
        },
        {
            "type": "object",
            "properties": {
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "user/updated/response",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "internal_error",
                    "type": "string"
                }
            },
            "required": [
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "user/updated/response",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "unauthorized",
                    "type": "string"
                }
            },
            "required": [
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "user/updated/response",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "invalid_request",
                    "type": "string"
                }
            },
            "required": [
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "user/updated/response",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "command_unimplemented",
                    "type": "string"
                }
            },
            "required": [
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        }
    ]
}
```

</details>

#### TypeScript Definition
```ts
export type UserUpdatedResponse =
    | {
          messageId: string;
          commandId: "user/updated/response";
          status: "success";
          data: {
              users: {
                  userId?: string;
                  username?: string;
                  displayName?: string;
                  avatarUrl?: string | null;
                  clanId?: string | null;
                  partyId?: string | null;
                  roles?: string[];
                  countryCode?: string;
                  status?: "offline" | "menu" | "playing" | "lobby";
                  battleStatus?:
                      | ({
                            battleId: string;
                        } & (
                            | ({
                                  playerId: number;
                                  teamId: number;
                                  color: string;
                                  bonus: number;
                                  inGame: boolean;
                              } & {
                                  isSpectator: false;
                                  isBot: false;
                                  ready: boolean;
                                  sync: {
                                      engine: number;
                                      game: number;
                                      map: number;
                                  };
                              })
                            | {
                                  isSpectator: true;
                                  isBot: false;
                              }
                        ))
                      | null;
                  friendIds?: string[];
                  outgoingFriendRequestIds?: string[];
                  incomingFriendRequestIds?: string[];
                  ignoreIds?: string[];
              }[];
          };
      }
    | {
          messageId: string;
          commandId: "user/updated/response";
          status: "failed";
          reason: "internal_error";
      }
    | {
          messageId: string;
          commandId: "user/updated/response";
          status: "failed";
          reason: "unauthorized";
      }
    | {
          messageId: string;
          commandId: "user/updated/response";
          status: "failed";
          reason: "invalid_request";
      }
    | {
          messageId: string;
          commandId: "user/updated/response";
          status: "failed";
          reason: "command_unimplemented";
      };

```
#### Example
```json
{
    "messageId": "mollit",
    "commandId": "user/updated/response",
    "status": "success",
    "data": {
        "users": [
            {
                "mollitb": -75320000,
                "status": "offline"
            }
        ]
    }
}
```
