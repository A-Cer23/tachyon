<!-- THIS FILE IS AUTOMATICALLY GENERATED, PLEASE DO NOT EDIT IT MANUALLY -->

# User

- [subscribe](#subscribe)
- [unsubscribe](#unsubscribe)
- [updated](#updated)
---

## Subscribe

Subscribe to user updates. By default, updates for the client's own user will always be subscribed to. If successful, the Tachyon server should respond with full data about the subscribed users, and then continue to send partial (stateful) updates via the [updated](#updated) response.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Requires Role: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "user/subscribe/request",
    "scopes": [
        "tachyon.lobby"
    ],
    "type": "object",
    "properties": {
        "type": {
            "const": "request",
            "type": "string"
        },
        "messageId": {
            "type": "string"
        },
        "commandId": {
            "const": "user/subscribe",
            "type": "string"
        },
        "data": {
            "type": "object",
            "properties": {
                "userIds": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            },
            "required": [
                "userIds"
            ]
        }
    },
    "required": [
        "type",
        "messageId",
        "commandId",
        "data"
    ]
}
```

</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "anim Lorem eu",
    "commandId": "user/subscribe",
    "data": {
        "userIds": [
            "anim Lorem eu",
            "anim Lorem eu",
            "anim Lorem eu"
        ]
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface UserSubscribeRequest {
    type: "request";
    messageId: string;
    commandId: "user/subscribe";
    data: {
        userIds: string[];
    };
}

```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "user/subscribe/response",
    "scopes": [
        "tachyon.lobby"
    ],
    "anyOf": [
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "user/subscribe",
                    "type": "string"
                },
                "status": {
                    "const": "success",
                    "type": "string"
                },
                "data": {
                    "type": "object",
                    "properties": {
                        "users": {
                            "type": "array",
                            "items": {
                                "type": "object",
                                "properties": {
                                    "userId": {
                                        "type": "string"
                                    },
                                    "username": {
                                        "type": "string"
                                    },
                                    "displayName": {
                                        "type": "string"
                                    },
                                    "avatarUrl": {
                                        "anyOf": [
                                            {
                                                "type": "string"
                                            },
                                            {
                                                "type": "null"
                                            }
                                        ]
                                    },
                                    "clanId": {
                                        "anyOf": [
                                            {
                                                "type": "string"
                                            },
                                            {
                                                "type": "null"
                                            }
                                        ]
                                    },
                                    "partyId": {
                                        "anyOf": [
                                            {
                                                "type": "string"
                                            },
                                            {
                                                "type": "null"
                                            }
                                        ]
                                    },
                                    "scopes": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    },
                                    "countryCode": {
                                        "type": "string"
                                    },
                                    "status": {
                                        "anyOf": [
                                            {
                                                "const": "offline",
                                                "type": "string"
                                            },
                                            {
                                                "const": "menu",
                                                "type": "string"
                                            },
                                            {
                                                "const": "playing",
                                                "type": "string"
                                            },
                                            {
                                                "const": "lobby",
                                                "type": "string"
                                            }
                                        ]
                                    },
                                    "battleStatus": {
                                        "anyOf": [
                                            {
                                                "allOf": [
                                                    {
                                                        "type": "object",
                                                        "properties": {
                                                            "battleId": {
                                                                "type": "string"
                                                            }
                                                        },
                                                        "required": [
                                                            "battleId"
                                                        ]
                                                    },
                                                    {
                                                        "anyOf": [
                                                            {
                                                                "type": "object",
                                                                "allOf": [
                                                                    {
                                                                        "type": "object",
                                                                        "properties": {
                                                                            "playerId": {
                                                                                "type": "integer"
                                                                            },
                                                                            "teamId": {
                                                                                "type": "integer"
                                                                            },
                                                                            "color": {
                                                                                "type": "string"
                                                                            },
                                                                            "bonus": {
                                                                                "type": "number"
                                                                            },
                                                                            "inGame": {
                                                                                "type": "boolean"
                                                                            }
                                                                        },
                                                                        "required": [
                                                                            "playerId",
                                                                            "teamId",
                                                                            "color",
                                                                            "bonus",
                                                                            "inGame"
                                                                        ]
                                                                    },
                                                                    {
                                                                        "type": "object",
                                                                        "properties": {
                                                                            "isSpectator": {
                                                                                "const": false,
                                                                                "type": "boolean"
                                                                            },
                                                                            "isBot": {
                                                                                "const": false,
                                                                                "type": "boolean"
                                                                            },
                                                                            "ready": {
                                                                                "type": "boolean"
                                                                            },
                                                                            "sync": {
                                                                                "type": "object",
                                                                                "properties": {
                                                                                    "engine": {
                                                                                        "type": "number"
                                                                                    },
                                                                                    "game": {
                                                                                        "type": "number"
                                                                                    },
                                                                                    "map": {
                                                                                        "type": "number"
                                                                                    }
                                                                                },
                                                                                "required": [
                                                                                    "engine",
                                                                                    "game",
                                                                                    "map"
                                                                                ]
                                                                            }
                                                                        },
                                                                        "required": [
                                                                            "isSpectator",
                                                                            "isBot",
                                                                            "ready",
                                                                            "sync"
                                                                        ]
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "type": "object",
                                                                "properties": {
                                                                    "isSpectator": {
                                                                        "const": true,
                                                                        "type": "boolean"
                                                                    },
                                                                    "isBot": {
                                                                        "const": false,
                                                                        "type": "boolean"
                                                                    }
                                                                },
                                                                "required": [
                                                                    "isSpectator",
                                                                    "isBot"
                                                                ]
                                                            }
                                                        ]
                                                    }
                                                ]
                                            },
                                            {
                                                "type": "null"
                                            }
                                        ]
                                    }
                                },
                                "required": [
                                    "userId",
                                    "username",
                                    "displayName",
                                    "avatarUrl",
                                    "clanId",
                                    "partyId",
                                    "scopes",
                                    "status",
                                    "battleStatus"
                                ]
                            }
                        }
                    },
                    "required": [
                        "users"
                    ]
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "data"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "user/subscribe",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "internal_error",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "user/subscribe",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "unauthorized",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "user/subscribe",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "invalid_request",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "user/subscribe",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "command_unimplemented",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        }
    ]
}
```

</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "Lorem anim ipsum",
    "commandId": "user/subscribe",
    "status": "success",
    "data": {
        "users": [
            {
                "userId": "Lorem anim ipsum",
                "username": "Lorem anim ipsum",
                "displayName": "Lorem anim ipsum",
                "avatarUrl": null,
                "clanId": null,
                "partyId": null,
                "scopes": [
                    "Lorem anim ipsum",
                    "Lorem anim ipsum",
                    "Lorem anim ipsum"
                ],
                "countryCode": "Lorem anim ipsum",
                "status": "playing",
                "battleStatus": null
            },
            {
                "userId": "Lorem anim ipsum",
                "username": "Lorem anim ipsum",
                "displayName": "Lorem anim ipsum",
                "avatarUrl": null,
                "clanId": null,
                "partyId": null,
                "scopes": [
                    "Lorem anim ipsum",
                    "Lorem anim ipsum",
                    "Lorem anim ipsum"
                ],
                "countryCode": "Lorem anim ipsum",
                "status": "playing",
                "battleStatus": null
            },
            {
                "userId": "Lorem anim ipsum",
                "username": "Lorem anim ipsum",
                "displayName": "Lorem anim ipsum",
                "avatarUrl": null,
                "clanId": null,
                "partyId": null,
                "scopes": [
                    "Lorem anim ipsum",
                    "Lorem anim ipsum",
                    "Lorem anim ipsum"
                ],
                "countryCode": "Lorem anim ipsum",
                "status": "playing",
                "battleStatus": null
            }
        ]
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface UserSubscribeResponse {
    type: "response";
    messageId: string;
    commandId: "user/subscribe";
    status: "success";
    data: {
        users: {
            userId: string;
            username: string;
            displayName: string;
            avatarUrl: string | null;
            clanId: string | null;
            partyId: string | null;
            scopes: string[];
            countryCode?: string;
            status: "offline" | "menu" | "playing" | "lobby";
            battleStatus:
                | ({
                      battleId: string;
                  } & (
                      | ({
                            playerId: number;
                            teamId: number;
                            color: string;
                            bonus: number;
                            inGame: boolean;
                        } & {
                            isSpectator: false;
                            isBot: false;
                            ready: boolean;
                            sync: {
                                engine: number;
                                game: number;
                                map: number;
                            };
                        })
                      | {
                            isSpectator: true;
                            isBot: false;
                        }
                  ))
                | null;
        }[];
    };
}

```
---

## Unsubscribe

Unsubscribe from user updates.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Requires Role: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "user/unsubscribe/request",
    "scopes": [
        "tachyon.lobby"
    ],
    "type": "object",
    "properties": {
        "type": {
            "const": "request",
            "type": "string"
        },
        "messageId": {
            "type": "string"
        },
        "commandId": {
            "const": "user/unsubscribe",
            "type": "string"
        },
        "data": {
            "type": "object",
            "properties": {
                "userIds": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            },
            "required": [
                "userIds"
            ]
        }
    },
    "required": [
        "type",
        "messageId",
        "commandId",
        "data"
    ]
}
```

</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "Lorem mollit ipsum",
    "commandId": "user/unsubscribe",
    "data": {
        "userIds": [
            "Lorem mollit ipsum",
            "Lorem mollit ipsum",
            "Lorem mollit ipsum"
        ]
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface UserUnsubscribeRequest {
    type: "request";
    messageId: string;
    commandId: "user/unsubscribe";
    data: {
        userIds: string[];
    };
}

```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "user/unsubscribe/response",
    "scopes": [
        "tachyon.lobby"
    ],
    "anyOf": [
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "user/unsubscribe",
                    "type": "string"
                },
                "status": {
                    "const": "success",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "user/unsubscribe",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "cannot_unsub_own_user",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "user/unsubscribe",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "internal_error",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "user/unsubscribe",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "unauthorized",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "user/unsubscribe",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "invalid_request",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        },
        {
            "type": "object",
            "properties": {
                "type": {
                    "const": "response",
                    "type": "string"
                },
                "messageId": {
                    "type": "string"
                },
                "commandId": {
                    "const": "user/unsubscribe",
                    "type": "string"
                },
                "status": {
                    "const": "failed",
                    "type": "string"
                },
                "reason": {
                    "const": "command_unimplemented",
                    "type": "string"
                }
            },
            "required": [
                "type",
                "messageId",
                "commandId",
                "status",
                "reason"
            ]
        }
    ]
}
```

</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "Lorem qui ipsum",
    "commandId": "user/unsubscribe",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface UserUnsubscribeResponse {
    type: "response";
    messageId: string;
    commandId: "user/unsubscribe";
    status: "success";
}

```
---

## Updated

Sent by the server to inform the client when subscribed users get updated in some way. The root object of each array element in `users` are partial, meaning only the elements present have changed, and anything missing is assumed to be unchanged.

- Endpoint Type: **Event**
- Source: **Server**
- Target: **User**
- Requires Role: `tachyon.lobby`

### Event

<details>
<summary>JSONSchema</summary>

```json
{
    "$id": "user/updated/event",
    "scopes": [
        "tachyon.lobby"
    ],
    "type": "object",
    "properties": {
        "type": {
            "const": "event",
            "type": "string"
        },
        "messageId": {
            "type": "string"
        },
        "commandId": {
            "const": "user/updated",
            "type": "string"
        },
        "data": {
            "type": "object",
            "properties": {
                "users": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "userId": {
                                "type": "string"
                            },
                            "username": {
                                "type": "string"
                            },
                            "displayName": {
                                "type": "string"
                            },
                            "avatarUrl": {
                                "anyOf": [
                                    {
                                        "type": "string"
                                    },
                                    {
                                        "type": "null"
                                    }
                                ]
                            },
                            "clanId": {
                                "anyOf": [
                                    {
                                        "type": "string"
                                    },
                                    {
                                        "type": "null"
                                    }
                                ]
                            },
                            "partyId": {
                                "anyOf": [
                                    {
                                        "type": "string"
                                    },
                                    {
                                        "type": "null"
                                    }
                                ]
                            },
                            "scopes": {
                                "type": "array",
                                "items": {
                                    "type": "string"
                                }
                            },
                            "countryCode": {
                                "type": "string"
                            },
                            "status": {
                                "anyOf": [
                                    {
                                        "const": "offline",
                                        "type": "string"
                                    },
                                    {
                                        "const": "menu",
                                        "type": "string"
                                    },
                                    {
                                        "const": "playing",
                                        "type": "string"
                                    },
                                    {
                                        "const": "lobby",
                                        "type": "string"
                                    }
                                ]
                            },
                            "battleStatus": {
                                "anyOf": [
                                    {
                                        "allOf": [
                                            {
                                                "type": "object",
                                                "properties": {
                                                    "battleId": {
                                                        "type": "string"
                                                    }
                                                },
                                                "required": [
                                                    "battleId"
                                                ]
                                            },
                                            {
                                                "anyOf": [
                                                    {
                                                        "type": "object",
                                                        "allOf": [
                                                            {
                                                                "type": "object",
                                                                "properties": {
                                                                    "playerId": {
                                                                        "type": "integer"
                                                                    },
                                                                    "teamId": {
                                                                        "type": "integer"
                                                                    },
                                                                    "color": {
                                                                        "type": "string"
                                                                    },
                                                                    "bonus": {
                                                                        "type": "number"
                                                                    },
                                                                    "inGame": {
                                                                        "type": "boolean"
                                                                    }
                                                                },
                                                                "required": [
                                                                    "playerId",
                                                                    "teamId",
                                                                    "color",
                                                                    "bonus",
                                                                    "inGame"
                                                                ]
                                                            },
                                                            {
                                                                "type": "object",
                                                                "properties": {
                                                                    "isSpectator": {
                                                                        "const": false,
                                                                        "type": "boolean"
                                                                    },
                                                                    "isBot": {
                                                                        "const": false,
                                                                        "type": "boolean"
                                                                    },
                                                                    "ready": {
                                                                        "type": "boolean"
                                                                    },
                                                                    "sync": {
                                                                        "type": "object",
                                                                        "properties": {
                                                                            "engine": {
                                                                                "type": "number"
                                                                            },
                                                                            "game": {
                                                                                "type": "number"
                                                                            },
                                                                            "map": {
                                                                                "type": "number"
                                                                            }
                                                                        },
                                                                        "required": [
                                                                            "engine",
                                                                            "game",
                                                                            "map"
                                                                        ]
                                                                    }
                                                                },
                                                                "required": [
                                                                    "isSpectator",
                                                                    "isBot",
                                                                    "ready",
                                                                    "sync"
                                                                ]
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "type": "object",
                                                        "properties": {
                                                            "isSpectator": {
                                                                "const": true,
                                                                "type": "boolean"
                                                            },
                                                            "isBot": {
                                                                "const": false,
                                                                "type": "boolean"
                                                            }
                                                        },
                                                        "required": [
                                                            "isSpectator",
                                                            "isBot"
                                                        ]
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    {
                                        "type": "null"
                                    }
                                ]
                            },
                            "friendIds": {
                                "type": "array",
                                "items": {
                                    "type": "string"
                                }
                            },
                            "outgoingFriendRequestIds": {
                                "type": "array",
                                "items": {
                                    "type": "string"
                                }
                            },
                            "incomingFriendRequestIds": {
                                "type": "array",
                                "items": {
                                    "type": "string"
                                }
                            },
                            "ignoreIds": {
                                "type": "array",
                                "items": {
                                    "type": "string"
                                }
                            }
                        }
                    }
                }
            },
            "required": [
                "users"
            ]
        }
    },
    "required": [
        "type",
        "messageId",
        "commandId",
        "data"
    ]
}
```

</details>

<details>
<summary>Example</summary>

```json
{
    "type": "event",
    "messageId": "Lorem non ipsum",
    "commandId": "user/updated",
    "data": {
        "users": [
            {
                "Lorem_22": "Lorem non ipsum",
                "userId": "Lorem non ipsum",
                "username": "Lorem non ipsum",
                "displayName": "Lorem non ipsum",
                "avatarUrl": null,
                "clanId": null,
                "status": "playing",
                "battleStatus": null,
                "outgoingFriendRequestIds": [
                    "Lorem non ipsum",
                    "Lorem non ipsum",
                    "Lorem non ipsum"
                ],
                "ignoreIds": [
                    "Lorem non ipsum",
                    "Lorem non ipsum",
                    "Lorem non ipsum"
                ]
            },
            {
                "Lorem_22": "Lorem non ipsum",
                "userId": "Lorem non ipsum",
                "username": "Lorem non ipsum",
                "displayName": "Lorem non ipsum",
                "avatarUrl": null,
                "clanId": null,
                "status": "playing",
                "battleStatus": null,
                "outgoingFriendRequestIds": [
                    "Lorem non ipsum",
                    "Lorem non ipsum",
                    "Lorem non ipsum"
                ],
                "ignoreIds": [
                    "Lorem non ipsum",
                    "Lorem non ipsum",
                    "Lorem non ipsum"
                ]
            },
            {
                "Lorem_22": "Lorem non ipsum",
                "userId": "Lorem non ipsum",
                "username": "Lorem non ipsum",
                "displayName": "Lorem non ipsum",
                "avatarUrl": null,
                "clanId": null,
                "status": "playing",
                "battleStatus": null,
                "outgoingFriendRequestIds": [
                    "Lorem non ipsum",
                    "Lorem non ipsum",
                    "Lorem non ipsum"
                ],
                "ignoreIds": [
                    "Lorem non ipsum",
                    "Lorem non ipsum",
                    "Lorem non ipsum"
                ]
            }
        ]
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface UserUpdatedEvent {
    type: "event";
    messageId: string;
    commandId: "user/updated";
    data: {
        users: {
            userId?: string;
            username?: string;
            displayName?: string;
            avatarUrl?: string | null;
            clanId?: string | null;
            partyId?: string | null;
            scopes?: string[];
            countryCode?: string;
            status?: "offline" | "menu" | "playing" | "lobby";
            battleStatus?:
                | ({
                      battleId: string;
                  } & (
                      | ({
                            playerId: number;
                            teamId: number;
                            color: string;
                            bonus: number;
                            inGame: boolean;
                        } & {
                            isSpectator: false;
                            isBot: false;
                            ready: boolean;
                            sync: {
                                engine: number;
                                game: number;
                                map: number;
                            };
                        })
                      | {
                            isSpectator: true;
                            isBot: false;
                        }
                  ))
                | null;
            friendIds?: string[];
            outgoingFriendRequestIds?: string[];
            incomingFriendRequestIds?: string[];
            ignoreIds?: string[];
        }[];
    };
}

```
